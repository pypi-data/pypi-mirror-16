<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. Currently available features &mdash; Transcrypt 0.0.29 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.29',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Transcrypt 0.0.29 documentation" href="index.html" />
    <link rel="prev" title="1. Getting started" href="installation_use.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="installation_use.html" title="1. Getting started"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Transcrypt 0.0.29 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="currently-available-features">
<h1>2. Currently available features<a class="headerlink" href="#currently-available-features" title="Permalink to this headline">¶</a></h1>
<p>Numscrypt currently supports:</p>
<ul>
<li><p class="first">ns_settings.optim_space setting added, default is False. Setting it to True is DISADVISED, since it will result in slow code.</p>
</li>
<li><dl class="first docutils">
<dt>ndarray with</dt>
<dd><ul class="first last simple">
<li>dtype int32, float32 and float64, views using offset and strides</li>
<li>multi-dimensional indexing</li>
<li>multi-dimensional slicing</li>
<li>reshape</li>
<li>astype</li>
<li>tolist</li>
<li>__repr__ and __str__</li>
<li>transpose</li>
<li>overloaded operators: * / + - &#64;, mixing of ndarray and scalar expressions</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">empty, array, copy</p>
</li>
<li><p class="first">hsplit, vsplit</p>
</li>
<li><p class="first">hstack.vstack</p>
</li>
<li><p class="first">zeros, ones, identity</p>
</li>
<li><dl class="first docutils">
<dt>linalg with</dt>
<dd><ul class="first last simple">
<li>matrix inversion</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="systematic-code-examples-a-guided-tour-of-numscrypt">
<h1>3. Systematic code examples: a guided tour of Numscrypt<a class="headerlink" href="#systematic-code-examples-a-guided-tour-of-numscrypt" title="Permalink to this headline">¶</a></h1>
<p>One ready-to-run code example is worth more than ten lengthy descriptions. The <em>autotest and demo suite</em>, that is part of the distribution, is a collection of sourcecode fragments called <em>testlets</em>. These testlets are used for automated regression testing of Numscrypt against NumPy.
Since they systematically cover all the library constructs, they are also very effective as a learning tool. The testlets are arranged alphabetically by subject.</p>
<div class="literal-block-wrapper container" id="autotest-numcrypt-autotest-demo-suite">
<div class="code-block-caption"><span class="caption-text">Autotest: Numcrypt autotest demo suite</span><a class="headerlink" href="#autotest-numcrypt-autotest-demo-suite" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">org.transcrypt.autotester</span>

<span class="kn">import</span> <span class="nn">basics</span>
<span class="kn">import</span> <span class="nn">module_linalg</span>
<span class="c">#import module_fft</span>

<span class="n">autoTester</span> <span class="o">=</span> <span class="n">org</span><span class="o">.</span><span class="n">transcrypt</span><span class="o">.</span><span class="n">autotester</span><span class="o">.</span><span class="n">AutoTester</span> <span class="p">()</span>

<span class="n">autoTester</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">basics</span><span class="p">,</span> <span class="s">&#39;basics&#39;</span><span class="p">)</span>
<span class="n">autoTester</span><span class="o">.</span><span class="n">run</span> <span class="p">(</span><span class="n">module_linalg</span><span class="p">,</span> <span class="s">&#39;module_linalg&#39;</span><span class="p">)</span>
<span class="c">#autoTester.run (module_fft, &#39;module_fft&#39;)</span>

<span class="n">autoTester</span><span class="o">.</span><span class="n">done</span> <span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="basics-creating-and-using-arrays">
<h2>3.1. Basics: creating and using arrays<a class="headerlink" href="#basics-creating-and-using-arrays" title="Permalink to this headline">¶</a></h2>
<div class="literal-block-wrapper container" id="testlet-basics">
<div class="code-block-caption"><span class="caption-text">Testlet: basics</span><a class="headerlink" href="#testlet-basics" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre>from org.transcrypt.stubs.browser import *
from org.transcrypt.stubs.browser import __main__, __envir__, __pragma__

# Imports for Transcrypt, resolved run time
if __envir__.executor_name == __envir__.transpiler_name:
    import numscrypt as num

# Imports for CPython, resolved compile time
__pragma__ (&#39;skip&#39;)
import numpy as num
__pragma__ (&#39;noskip&#39;)

def run (autoTester):
    z = num.zeros ((4, 3, 2), &#39;int32&#39;)
    autoTester.check (&#39;Zeros&#39;, z.tolist (), &#39;&lt;br&gt;&#39;)
    
    o = num.ones ((1, 2, 3))
    autoTester.check (&#39;Ones&#39;, o.astype (&#39;int32&#39;) .tolist ())
    
    i = num.identity (3, &#39;int32&#39;)
    autoTester.check (&#39;Identity&#39;, i.tolist (), &#39;&lt;br&gt;&#39;)
    
    # shape: 2 blocks x 3 rows x 4 columns
    
    a = num.array ([
        [
            [1, 1, 2, 3],
            [4, 5, 6, 7],
            [8, 9, 10, 12]
        ], [
            [100, 101, 102, 103],
            [104, 105, 106, 107],
            [108, 109, 110, 112]
        ]
    ])
    
    autoTester.check (&#39;Matrix a&#39;, a.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Transpose of a&#39;, a.transpose () .tolist (), &#39;&lt;br&gt;&#39;)
    
    b = num.array ([
        [
            [2, 2, 4, 6],
            [8, 10, 12, 14],
            [16, 18, 20, 24]
        ], [
            [200, 202, 204, 206],
            [208, 210, 212, 214],
            [216, 218, 220, 224]
        ]
    ])
    
    bp =  b.transpose ((2, 1, 0))
    
    autoTester.check (&#39;Matrix b&#39;, b.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Permutation of b&#39;, bp.tolist (), &#39;&lt;br&gt;&#39;)
        
    c = num.array ([
        [1, 2, 3, 4],
        [5, 6, 7, 8],
        [9, 10, 11, 12],
    ], &#39;int32&#39;)
    
    autoTester.check (&#39;Shape strides c&#39;, tuple (c.shape), tuple (c.strides), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Matrix c&#39;, c.tolist (), &#39;&lt;br&gt;&#39;)
    
    ct = c.transpose ()
    autoTester.check (&#39;Shape strids ct&#39;, tuple (ct.shape), tuple (ct.strides), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Transpose of c&#39;, ct .tolist (), &#39;&lt;br&gt;&#39;)

    cs0, cs1 = num.hsplit (c, 2)
    autoTester.check (&#39;Matrix cs0&#39;, cs0.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Matrix cs1&#39;, cs1.tolist (), &#39;&lt;br&gt;&#39;)

    ci = num.hstack ((cs1, cs0))
    autoTester.check (&#39;Matrix ci&#39;, ci.tolist (), &#39;&lt;br&gt;&#39;)
    
    cts0, cts1, cts2 = num.hsplit (ct, 3)
    autoTester.check (&#39;Matrix cts0&#39;, cts0.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Matrix cts1&#39;, cts1.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Matrix cts2&#39;, cts2.tolist (), &#39;&lt;br&gt;&#39;)

    cti = num.hstack ((cts2, cts1, cts0))
    autoTester.check (&#39;Matrix ci&#39;, cti.tolist (), &#39;&lt;br&gt;&#39;)
    
    d = num.array ([
        [13, 14],
        [15, 16],
        [17, 18],
        [19, 20]
    ], &#39;int32&#39;)
    
    autoTester.check (&#39;Matrix d&#39;, d.tolist (), &#39;&lt;br&gt;&#39;)
    dt = d.transpose ()
    autoTester.check (&#39;Permutation of d&#39;, dt.tolist (), &#39;&lt;br&gt;&#39;)
    
    ds0, ds1, ds2, ds3 = num.vsplit (d, 4)
    autoTester.check (&#39;Matrix ds0&#39;, ds0.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Matrix ds1&#39;, ds1.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Matrix ds2&#39;, ds2.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Matrix ds3&#39;, ds3.tolist (), &#39;&lt;br&gt;&#39;)

    di = num.vstack ((ds3, ds2, ds1, ds0))
    autoTester.check (&#39;Matrix di&#39;, di.tolist (), &#39;&lt;br&gt;&#39;)
    
    dts0, dts1 = num.vsplit (dt, 2)
    autoTester.check (&#39;Matrix dts0&#39;, dts0.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Matrix dts1&#39;, dts1.tolist (), &#39;&lt;br&gt;&#39;)

    dti = num.vstack ((dts1, dts0))
    autoTester.check (&#39;Matrix dti&#39;, dti.tolist (), &#39;&lt;br&gt;&#39;)
    
    v0 = num.array (range (10)) 
    v1 = num.array ((1, 2, 3, 1, 2, 3, 1, 2, 3, 1))
    
    __pragma__ (&#39;opov&#39;)
    a [1, 0, 2] = 177
    el = b [1, 2, 3]

    bsl0 = b [1, 1 : 3, : ]
    bsl1 = b [1 : 2, 1 : 3, :]
    bsl2 = b [1, 1, :]
    bsl3 = b [1, 1 : 3, 1]
    bsl4 = b [ : , 1, 1]
    bsl5 = b [1, 1 : 3, :]
    bsl6 = b [1, 1 : 3, 1 : 4]
    bsl7 = b [1, 2 : 3, 2 : 4]
    
    bpsl0 = bp [1, 1 : 3, : ]
    bpsl1 = bp [1 : 2, 1 : 3, :]
    bpsl2 = bp [1, 1, :]
    bpsl3 = bp [1, 1 : 3, 1]
    bpsl4 = bp [ : , 1, 1]
    bpsl5 = bp [3, 1 : 3, :]
    bpsl6 = bp [2 : 4, 1 : 3, 0 : 1]
    bpsl7 = bp [2 : 4, 2 : 3, 1 : 2]
    
    sum = a + b
    dif = a - b
    prod = a * b
    quot = a / b
    dot = c @ d
    vsum = v0 + v1
    vel = vsum [6]
    vsum [6] = 70
    
    mul_a3 = a * 3
    mul_3a = 3 * a
    div_a3 = a / 3.1234567
    div_3a = 3.1234567 / a
    add_a3 = a + 3
    add_3a = 3 + a
    sub_a3 = a - 3
    sub_3a = 3 - a
    neg_a = -a
    
    __pragma__ (&#39;noopov&#39;)
    
    autoTester.check (&#39;El a [1, 2, 3] alt&#39;, a.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;El b [1, 2, 3]&#39;, el, &#39;&lt;br&gt;&#39;)
    
    autoTester.check (&#39;Sl b0&#39;, bsl0.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl b1&#39;, bsl1.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl b2&#39;, bsl2.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl b3&#39;, bsl3.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl b4&#39;, bsl4.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl b5&#39;, bsl5.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl b6&#39;, bsl6.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl b7&#39;, bsl7.tolist (), &#39;&lt;br&gt;&#39;)
    
    autoTester.check (&#39;Sl bp0&#39;, bpsl0.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl bp1&#39;, bpsl1.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl bp2&#39;, bpsl2.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl bp3&#39;, bpsl3.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl bp4&#39;, bpsl4.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl bp5&#39;, bpsl5.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl bp6&#39;, bpsl6.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Sl bp7&#39;, bpsl7.tolist (), &#39;&lt;br&gt;&#39;)
    
    autoTester.check (&#39;Matrix sum&#39;, sum.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Matrix difference&#39;, dif.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Matrix product&#39;, prod.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Matrix quotient&#39;, quot.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Matrix dotproduct&#39;, dot.tolist (), &#39;&lt;br&gt;&#39;)
    
    autoTester.check (&#39;Vector&#39;, v0.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Vector&#39;, v1.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;El sum old&#39;, vel, &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;Vector sum new&#39;, vsum.tolist (), &#39;&lt;br&gt;&#39;)
    
    autoTester.check (&#39;mul_a3&#39;, mul_a3.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;mul_3a&#39;, mul_3a.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;div_a3&#39;, num.round (div_a3, 2).tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;div_3a&#39;, num.round (div_3a, 2).tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;add_a3&#39;, add_a3.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;add_3a&#39;, add_3a.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;sub_a3&#39;, sub_a3.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;sub_3a&#39;, sub_3a.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;neg_a&#39;, neg_a.tolist (), &#39;&lt;br&gt;&#39;)
    
    __pragma__ (&#39;opov&#39;)
    comp_a = num.array ([
        [1 + 2j, 2 - 1j, 3],
        [4, 5 + 3j, 7]
    ], &#39;complex128&#39;)    
    comp_b = num.array ([
        [6, 8 - 1j],
        [9 + 3j, 10],
        [11, 12 -6j]
    ], &#39;complex128&#39;)
    comp_c = comp_a @ comp_b
    __pragma__ (&#39;noopov&#39;)
    
    autoTester.check (&#39;comp_a&#39;, comp_a.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;comp_b&#39;, comp_b.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;comp_c&#39;, comp_c.tolist (), &#39;&lt;br&gt;&#39;)
    
    __pragma__ (&#39;opov&#39;)
    comp_a_square = comp_a [ : , : 2]
    comp_b_square = comp_b [1 : , : ]
    
    comp_c_square = comp_a_square * comp_b_square
    comp_d_square = comp_a_square / comp_b_square
    comp_e_square = comp_a_square + comp_b_square
    comp_f_square = comp_a_square - comp_b_square
    
    __pragma__ (&#39;noopov&#39;)
    
    autoTester.check (&#39;comp_a_square&#39;, comp_a_square.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;comp_b_square&#39;, comp_b_square.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;comp_c_square&#39;, comp_c_square.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;comp_d_square&#39;, num.round (comp_d_square, 2).tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;comp_e_square&#39;, comp_e_square.tolist (), &#39;&lt;br&gt;&#39;)
    autoTester.check (&#39;comp_f_square&#39;, comp_f_square.tolist (), &#39;&lt;br&gt;&#39;)
</pre></div>
</div>
</div>
</div>
<div class="section" id="linalg-matrix-inversion">
<h2>3.2. Linalg: matrix inversion<a class="headerlink" href="#linalg-matrix-inversion" title="Permalink to this headline">¶</a></h2>
</div>
</div>
<div class="section" id="some-more-examples-interactive-tests">
<h1>4. Some more examples: interactive tests<a class="headerlink" href="#some-more-examples-interactive-tests" title="Permalink to this headline">¶</a></h1>
<div class="section" id="ns-settings-optimize-space">
<h2>4.1. ns_settings.optimize_space<a class="headerlink" href="#ns-settings-optimize-space" title="Permalink to this headline">¶</a></h2>
<p>For time critical operations like <em>&#64;</em> and <em>inv</em>, slicing operations are avoided.
For <em>&#64;</em> this happens by copying arrays to &#8216;natural stride order&#8217;.
Setting ns_settings.optimize_space to True will avoid this copying to save memory space.
In general this is DISADVISED, since it will considerably slow down execution of the <em>&#64;</em> operator, which is O (n^3).</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/numscrypt_logo_sphinx.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Subjects</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. Currently available features</a></li>
<li><a class="reference internal" href="#systematic-code-examples-a-guided-tour-of-numscrypt">3. Systematic code examples: a guided tour of Numscrypt</a><ul>
<li><a class="reference internal" href="#basics-creating-and-using-arrays">3.1. Basics: creating and using arrays</a></li>
<li><a class="reference internal" href="#linalg-matrix-inversion">3.2. Linalg: matrix inversion</a></li>
</ul>
</li>
<li><a class="reference internal" href="#some-more-examples-interactive-tests">4. Some more examples: interactive tests</a><ul>
<li><a class="reference internal" href="#ns-settings-optimize-space">4.1. ns_settings.optimize_space</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation_use.html"
                        title="previous chapter">1. Getting started</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/supported_constructs.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="installation_use.html" title="1. Getting started"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Transcrypt 0.0.29 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Jacques de Hooge.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.3.
    </div>
  </body>
</html>