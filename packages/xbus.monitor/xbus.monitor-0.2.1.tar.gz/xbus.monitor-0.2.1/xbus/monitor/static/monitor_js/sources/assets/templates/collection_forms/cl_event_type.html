<div class="row">
    <div id="breadcrumb" class="col-md-12">
        <ol class="breadcrumb">
            <li><a href="#">Home</a></li>
            <li><a href="#">Xbus</a></li>
            <li><a href="#/<%= name %>">Clearing Event Type</a></li>
            <% if(model) { %>
                <% if(editing) { %>
                    <li><a href="#/<%= name %>/<%= model.id %>/edit">Edit</a></li>
                <% } else { %>
                    <li><a href="#/<%= name %>/<%= model.id %>">View</a></li>
                <% } %>
            <% } else { %>
                <li><a href="#/<%= name %>/create">Create</a></li>
            <% }%>
        </ol>
    </div>
</div>
<div class="row">
    <div class="col-xs-12 col-sm-12">
        <div class="box">
            <div class="box-header">
                <div class="box-name">
                    <span><%= model ? (editing ? 'Edit' : 'View') : 'New' %> Clearing Event Type</span>
                </div>
                <div class="box-icons">
                    <a class="collapse-link"> <i class="fa fa-chevron-up"></i>
                    </a> <a class="expand-link"> <i class="fa fa-expand"></i>
                    </a> <a class="close-link"> <i class="fa fa-times"></i>
                    </a>
                </div>
                <div class="no-move"></div>
            </div>
            <div class="box-content">
                <form class="form-inline record-form" role="form">
                    <fieldset>
                        <div class="form-group">
                            <label>Name</label>
                            <input name="name" type="text"
                                value="<%= model ? model.escape('name') : '' %>"
                                class="form-control" />
                        </div>
                        <div class="form-group" style="width: 100%;">
                            <label>
                                <input name="has_lookup" type="checkbox"
                                    <%= (model && model.get('has_lookup')) ? 'checked="checked"' : '' %>
                                    class="form-control" />
                                Provides a "lookup" feature (if disabled, items are
                                directly transmitted into the target system)
                            </label>
                        </div>
                        <div class="form-group" style="width: 100%;">
                            <label>
                                <input name="has_clearing" type="checkbox"
                                    <%= (model && model.get('has_clearing')) ? 'checked="checked"' : '' %>
                                    class="form-control" />
                                Provides a "data clearing" feature (to handle conflicts
                                via this GUI)
                            </label>
                        </div>
                        <div class="form-group">
                            <label>CRUD operator of this event type</label>
                            <select name="crud_op" class="form-control">
                                <!-- TODO Loop... -->
                                <option value="" />
                                <option value="create"
                                    <%= (model && model.get('crud_op') === 'create') ? 'selected="selected"' : '' %>>
                                    Create
                                </option>
                                <option value="update"
                                    <%= (model && model.get('crud_op') === 'update') ? 'selected="selected"' : '' %>>
                                    Update
                                </option>
                                <option value="delete"
                                    <%= (model && model.get('crud_op') === 'delete') ? 'selected="selected"' : '' %>>
                                    Delete
                                </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Target collection</label>
                            <input name="target_collection" type="text"
                                value="<%= model ? model.escape('target_collection') : '' %>"
                                class="form-control" />
                        </div>
                        <div class="form-group" style="width: 100%;">
                            <label>
                                <input name="test_changes" type="checkbox"
                                    <%= (model && model.get('test_changes')) ? 'checked="checked"' : '' %>
                                    class="form-control" />
                                Launch test runs before applying changes on target systems
                            </label>
                        </div>
                    </fieldset>
                    <% if(editing) { %>
                        <hr />
                        <button type="submit" class="btn btn-primary"><%= model ? 'Update' : 'Create' %></button>
                        <% if(model) { %>
                            <input type="hidden" name="id" value="<%= model.id %>" />
                            <button class="btn btn-danger delete">Delete</button>
                        <% } %>
                    <% } %>
                </form>
                <% if(model) { %>
                    <div>
                        <a href="#/<%= name %>/<%= model.id %>/item_types">
                            View/Edit Item Types
                        </a>
                    </div>
                <% } %>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    // <![CDATA[

    prepareForm('.record-form', <%= editing %>);

    // ]]>
</script>
