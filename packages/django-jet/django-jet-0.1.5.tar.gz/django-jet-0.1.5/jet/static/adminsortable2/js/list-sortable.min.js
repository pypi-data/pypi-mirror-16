"use strict";jQuery.extend({getQueryParams:function(){var e=[],t,n,r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(n=0;n<r.length;n++)t=r[n].split("="),e.push(t[0]),e[t[0]]=t[1];return e},getQueryParam:function(e){return jQuery.getQueryParams()[e]}}),jQuery(function(e){var t,n,r,i,s=e("form").find('input[name="csrfmiddlewaretoken"]').val(),o=e.getQueryParam("o");if(window.admin_sortable2===undefined)return;o===undefined&&(o="1");var u;e("#result_list").sortable({tolerance:"pointer",items:"tbody tr",cursor:"move",axis:"y",containment:e("#result_list tbody"),forcePlaceholderSize:!0,helper:function(t,n){var r=n.children();return u=n.clone().addClass("dragging"),u.children().each(function(t){e(this).width(r.eq(t).width())}),u},start:function(n,r){e("#result_list tr.ui-sortable-placeholder").attr("height",u.height()+1),t=r.item.index()},stop:function(u,a){var f=e(this);f.find("tbody tr").each(function(t){e(this).removeClass("row1 row2").addClass(t%2?"row2":"row1")}),r=a.item.index();if(t==r)return;r==0?o.split(".")[0]==="-1"?i=parseInt(e(a.item.context.nextElementSibling).find("div.drag").attr("order"))+1:i=parseInt(e(a.item.context.nextElementSibling).find("div.drag").attr("order"))-1:i=e(a.item.context.previousElementSibling).find("div.drag").attr("order"),n=e(a.item.context).find("div.drag").attr("order"),e.ajax({url:window.admin_sortable2.update_url,type:"POST",data:{o:o,startorder:n,endorder:i,csrfmiddlewaretoken:s},success:function(t){e.each(t,function(t,n){f.find("tbody tr input.action-select[value="+n.pk+"]").parents("tr").each(function(){e(this).find("div.drag").attr("order",n.order)})})},error:function(e){console.error("The server responded: "+e.responseText)}})}}),e("#result_list, tbody, tr, td, th").disableSelection()});
