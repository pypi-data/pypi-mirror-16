{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags static core_tags i18n %}

{% block content %}

<div class="title {{competition.get_effective_extra_style_hints}} {% if self.image %}feature-image{% endif %}">
  <div class="icon">
    {% if competition.thank_you_page.get_parent_page.get_effective_image %}
      {% image competition.thank_you_page.get_parent_page.get_effective_image width-98 as tmp_photo %}
      <img src="{{ tmp_photo.url }}" alt="{{ self.get_parent_page.get_effective_image.title }}"/>
    {% endif %}
  </div>
  <h6><a href=""> {% trans "Share your story" %}</a></h6>

</div>

<div class="block {{competition.get_effective_extra_style_hints}}">
  <h3>{{competition.title}}</h3>
  <p>{{competition.description}}</p>
  <hr>
  <div class="yourwords centent">
    {% for block in competition.content %}
        {% if block.block_type == 'heading' %}
            <h5>{{ block.value }}</h5>
        {% else %}
        {% if block.block_type == 'image' %}
          {% image block.value width-240 %}
        {% else %}
        {% if block.block_type == 'numbered_list' %}
          <ol>
          {% for item in block.value %}
            <li>{{item}}</li>
          {% endfor %}
          </ol>
        {% else %}
        {% if block.block_type == 'list' %}
          <ul>
          {% for item in block.value %}
            <li>{{item}}</li>
          {% endfor %}
        </ul>
        {% else %}
            {{ block }}
        {% endif %}
        {% endif %}
        {% endif %}
        {% endif %}
    {% endfor %}

    <form method="post">{% csrf_token %}

        {% if form.story_name.errors %}
          <p class="alert-error">* {{form.story_name.errors|join:' '}}</p>
        {% endif %}
        <br>
        <label>{% trans "Title of your story (max 60 characters)" %}</label>
        {{ form.story_name }}

        {% if form.story_text.errors %}
          <p class="alert-error" >* {{form.story_text.errors|join:' '}}</p>
        {% endif %}
        <label>{% trans "Tell us your story here" %}</label>
        {{ form.story_text }}

        <div>
          {% if form.terms_or_conditions_approved.errors %}
          <p class="alert-error">* {{form.terms_or_conditions_approved.errors|join:' '}}</p>
          {% endif %}
          {{ form.terms_or_conditions_approved }}
          <label>{% trans "I accept the Terms and Conditions" %}</label>
        </div>

        <div >
          {{ form.hide_real_name }}
          <label>{% trans "Share my story anonymously" %}</label>
        </div>

        <input type="submit" value="Submit Your Story" />
    </form>
  </div>
    <a href="{{request.site.root_page.url}}" class="button inverted">{% trans "Home" %}</a>
</div>
{% endblock %}
