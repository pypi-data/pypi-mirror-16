{% extends "accounts/__base.html" %}
{% load i18n %}



{% block headtitle %}{% trans 'User Profiles' noop %}{% endblock %}

{% block page-content %}
 
 
  
<div class="row" >
  <div class="col-sm-12 col-md-12 col-lg-12">    
    <ol class="breadcrumb" style="margin-top: 0px;">
      <li><a href="/dashboard/">{% trans 'Dashboard' %}</a> </li>
      <li>{% trans 'Profiles' %}</li>
    </ol>
    <h3 class="page-header"> {% trans 'User Profiles' %}</h3>
  </div>
</div>
      
<div class="row" >      
  <div class="col-sm-3 col-md-3 col-lg-3" >
    <form method="POST" action="/accounts/profiles/">{% csrf_token %}
      <input type="text" name="search_term" placeholder="{% trans 'Search Users' %}"> &nbsp;
      <button type="submit" > <span class="glyphicon glyphicon-search"></span> </button>
    </form> 
  </div>  
  <div class="col-sm-2 col-md-2 col-lg-2" >
    {% if allow_edit %}
    <a class="btn btn-primary" href="/accounts/profiles/create/" style="margin-left: 40px;" > {% trans 'Create New User' %} </a>
    {% endif %}
  </div>
  <div class="col-sm-7 col-md-7 col-lg-7" >
  </div>
</div>      
      
<div class="row" >  
  <div class="col-sm-12 col-md-12 col-lg-12">    
    <table class="table table-striped">
      <thead>
        <tr>
          <th>{% trans 'User Name' %}</th>
          <th>{% trans 'Role' %}</th>
          <th>{% trans 'Last Login' %}</th>
          <th>{% trans 'Options' %}</th>
        </tr>
      </thead>
      {% for user in page_of_users %}
      <tr>
        <td>{{user.user.username}}</td>
        <td>{{user.get_oauth_scope_display}}</td>
        <td>{{user.user.last_login}}</td>
        <td>
          <div class="btn-group" role="group" aria-label="...">
            <a href="/accounts/profiles/{{user.user.id}}/" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-eye-open"></span></a>
            {% if allow_edit %}
            <a href="/accounts/profiles/{{user.user.id}}/edit/" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-pencil"></span></a>
            <a href="/accounts/profiles/{{user.user.id}}/delete/" class="btn btn-default btn-xs" onclick="return delete_user('{{user.user.id}}','{{user.user.username}}');"><span class="glyphicon glyphicon-remove"></span></a>
            {% endif %}
          </div>
        </td>
      </tr>
      {% endfor %}
    </table>
    <nav>
      <ul class="pager">
        {% if page_of_users.has_previous %}
        <li><a href="?page={{ page_of_users.previous_page_number }}&term={{ the_term }}">Previous</a></li>
        {% endif %}
        <li><a href="#">&nbsp;Page {{ page_of_users.number }} of {{ page_of_users.paginator.num_pages }}&nbsp;</a></li>
        {% if page_of_users.has_next %}
        <li><a href="?page={{ page_of_users.next_page_number }}&term={{ the_term }}">Next</a></li>
        {% endif %}
      </ul>
    </nav>
  </div>
</div>

{% endblock page-content %}

{% block script %}
<script>
 
 
function delete_user(user_id, username)
{
    var do_delete = confirm("Are you sure you want to delete user: "+username+" ?");
    
    return do_delete;
}

 

</script>
{% endblock script %}
