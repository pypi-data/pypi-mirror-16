<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Verifier &mdash; PyPump 0.6-dev documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.6-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="PyPump 0.6-dev documentation" href="../index.html" />
    <link rel="next" title="Web Development using PyPump" href="webpump.html" />
    <link rel="prev" title="Authorization" href="authentication.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="webpump.html" title="Web Development using PyPump"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="authentication.html" title="Authorization"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">PyPump 0.6-dev documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-verifier">
<h1>Getting Verifier<a class="headerlink" href="#getting-verifier" title="Permalink to this headline">¶</a></h1>
<p>As part of OAuth to allow OOB (Out of band) applications to have access to the account
we have a link that they will click, follow the instructions and then copy the verifier
into the application which we then relay to the server with other tokens. The server
will them provide us with the credentials that we can use.</p>
<p>You will need to write a method which takes a URL that the user needs to visit and provide
some way of the users inputting string value which you will then give to PyPump. This could
just be a case of printing the link and using raw_input/input to get the verifier or it could
be a more complex funtion which redraws a GUI and opens a browser.</p>
<div class="section" id="simple-verifier">
<h2>Simple verifier<a class="headerlink" href="#simple-verifier" title="Permalink to this headline">¶</a></h2>
<p>The following is an example of a simple verifier which could be used for a CLI (command line interface)
application. This method is actually the same function which is used to prompt the user to provide a
verifier in the PyPump Shell:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">verifier</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Asks for verification code for OAuth OOB &quot;&quot;&quot;</span>
    <span class="k">print</span> <span class="s">&quot;Please open and follow the instructions:&quot;</span>
    <span class="k">print</span> <span class="n">url</span>
    <span class="k">return</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&quot;Verifier: &quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="callback">
<h2>Callback<a class="headerlink" href="#callback" title="Permalink to this headline">¶</a></h2>
<p>Having a function which is called and then returns back the verification might be more
difficult in GUI programs or other interfaces. We provide a callback mechamism that you
can use. If the verifier function returns None then PyPump assumes you will be be then
calling PyPump.verifier which takes the verifier as the argument.</p>
</div>
<div class="section" id="complex-gui-example">
<h2>Complex GUI example<a class="headerlink" href="#complex-gui-example" title="Permalink to this headline">¶</a></h2>
<p>As an attempt to avoid writing an example which is tied to one GUI library, I have made
one up in order to demonstrate exactly what might be involved:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">webbrowser</span> <span class="c"># it&#39;s a python module - really, check it out.</span>

<span class="kn">from</span> <span class="nn">pypump</span> <span class="kn">import</span> <span class="n">Client</span><span class="p">,</span> <span class="n">PyPump</span>

<span class="k">class</span> <span class="nc">MyWindow</span><span class="p">(</span><span class="n">guilib</span><span class="o">.</span><span class="n">Window</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="c"># Write out to the screen telling them what we&#39;re doing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="s">&quot;Please wait, loading...&quot;</span><span class="p">)</span>

        <span class="c"># setup pypump object</span>
        <span class="n">clinet</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span>
            <span class="n">webfinger</span><span class="o">=</span><span class="s">&#39;someone@server.com&#39;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="s">&#39;native&#39;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s">&#39;An awesome GUI client&#39;</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pump</span> <span class="o">=</span> <span class="n">PyPump</span><span class="p">(</span>
            <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
            <span class="n">verifier_callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ask_for_verifier</span>
        <span class="p">)</span>


    <span class="k">def</span> <span class="nf">ask_for_verifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Takes a URL, opens it and asks for a verifier &quot;&quot;&quot;</span>
        <span class="c"># Open the URL in a browser</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

        <span class="c"># Clear other stuff from window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_window</span><span class="p">()</span>

        <span class="c"># draw a text input box and a button to submit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">guilib</span><span class="o">.</span><span class="n">InputBox</span><span class="p">(</span><span class="s">&#39;Verifier:&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;verifier&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">guilib</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s">&#39;Verify!&#39;</span><span class="p">,</span> <span class="n">onclick</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">verifier</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">verifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">verifier</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; When the button is clicked it sends the verifier here which we give to PyPump &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pump</span><span class="o">.</span><span class="n">verifier</span><span class="p">(</span><span class="n">verifier</span><span class="p">)</span>
</pre></div>
</div>
<p>If you return anything from your verifier callback, pypump will expect that to be
the verifier code so unless you&#8217;re actually using a simple method, ensure you return
None.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting Verifier</a><ul>
<li><a class="reference internal" href="#simple-verifier">Simple verifier</a></li>
<li><a class="reference internal" href="#callback">Callback</a></li>
<li><a class="reference internal" href="#complex-gui-example">Complex GUI example</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="authentication.html"
                        title="previous chapter">Authorization</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="webpump.html"
                        title="next chapter">Web Development using PyPump</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/gettingstarted/verifier_callback.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="webpump.html" title="Web Development using PyPump"
             >next</a> |</li>
        <li class="right" >
          <a href="authentication.html" title="Authorization"
             >previous</a> |</li>
        <li><a href="../index.html">PyPump 0.6-dev documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Jessica Tallon.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>