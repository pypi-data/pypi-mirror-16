<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>bioblend.toolshed.repositories &mdash; BioBlend 0.5.4-dev documentation</title>
    
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.5.4-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="BioBlend 0.5.4-dev documentation" href="../../../index.html" />
    <link rel="up" title="bioblend.toolshed" href="../toolshed.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">BioBlend 0.5.4-dev documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../../bioblend.html" >bioblend</a> &raquo;</li>
          <li class="nav-item nav-item-3"><a href="../toolshed.html" accesskey="U">bioblend.toolshed</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for bioblend.toolshed.repositories</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Interaction with a Tool Shed instance</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">six.moves.urllib.parse</span> <span class="kn">import</span> <span class="n">urljoin</span>

<span class="kn">from</span> <span class="nn">bioblend.galaxy.client</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="kn">from</span> <span class="nn">bioblend.util</span> <span class="kn">import</span> <span class="n">attach_file</span>


<div class="viewcode-block" id="ToolShedClient"><a class="viewcode-back" href="../../../api_docs/toolshed/all.html#bioblend.toolshed.repositories.ToolShedClient">[docs]</a><span class="k">class</span> <span class="nc">ToolShedClient</span><span class="p">(</span><span class="n">Client</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolshed_instance</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module</span> <span class="o">=</span> <span class="s">&#39;repositories&#39;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ToolShedClient</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">toolshed_instance</span><span class="p">)</span>

<div class="viewcode-block" id="ToolShedClient.get_repositories"><a class="viewcode-back" href="../../../api_docs/toolshed/all.html#bioblend.toolshed.repositories.ToolShedClient.get_repositories">[docs]</a>    <span class="k">def</span> <span class="nf">get_repositories</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a list of all the repositories in a Galaxy Tool Shed</span>

<span class="sd">        :rtype: list</span>
<span class="sd">        :return: Returns a list of dictionaries containing information about</span>
<span class="sd">                 repositories present in the Tool Shed.</span>
<span class="sd">                 For example::</span>

<span class="sd">                     [{u&#39;times_downloaded&#39;: 0, u&#39;user_id&#39;: u&#39;5cefd48bc04af6d4&#39;,</span>
<span class="sd">                     u&#39;description&#39;: u&#39;Order Contigs&#39;, u&#39;deleted&#39;: False,</span>
<span class="sd">                     u&#39;deprecated&#39;: False, u&#39;private&#39;: False,</span>
<span class="sd">                     u&#39;url&#39;: u&#39;/api/repositories/287bd69f724b99ce&#39;,</span>
<span class="sd">                     u&#39;owner&#39;: u&#39;billybob&#39;, u&#39;id&#39;: u&#39;287bd69f724b99ce&#39;,</span>
<span class="sd">                     u&#39;name&#39;: u&#39;best_tool_ever&#39;}]</span>

<span class="sd">        .. versionchanged:: 0.4.1</span>
<span class="sd">            Changed method name from ``get_tools`` to ``get_repositories`` to</span>
<span class="sd">            better align with the Tool Shed concepts</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Client</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ToolShedClient.show_repository"><a class="viewcode-back" href="../../../api_docs/toolshed/all.html#bioblend.toolshed.repositories.ToolShedClient.show_repository">[docs]</a>    <span class="k">def</span> <span class="nf">show_repository</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">toolShed_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Display information of a repository from Tool Shed</span>

<span class="sd">        :type toolShed_id: string</span>
<span class="sd">        :param toolShed_id: Encoded toolShed ID</span>

<span class="sd">        :rtype: dictionary</span>
<span class="sd">        :return: Information about the tool</span>
<span class="sd">                 For example::</span>

<span class="sd">                     {{u&#39;times_downloaded&#39;: 0, u&#39;user_id&#39;: u&#39;5cefd48bc04af6d4&#39;,</span>
<span class="sd">                     u&#39;description&#39;: u&#39;Order Contigs&#39;, u&#39;deleted&#39;: False,</span>
<span class="sd">                     u&#39;deprecated&#39;: False, u&#39;private&#39;: False,</span>
<span class="sd">                     u&#39;url&#39;: u&#39;/api/repositories/287bd69f724b99ce&#39;,</span>
<span class="sd">                     u&#39;owner&#39;: u&#39;billybob&#39;, u&#39;id&#39;: u&#39;287bd69f724b99ce&#39;,</span>
<span class="sd">                     u&#39;name&#39;: u&#39;best_tool_ever&#39;}</span>

<span class="sd">        .. versionchanged:: 0.4.1</span>
<span class="sd">            Changed method name from ``show_tool`` to ``show_repository`` to</span>
<span class="sd">            better align with the Tool Shed concepts</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Client</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">toolShed_id</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ToolShedClient.get_ordered_installable_revisions"><a class="viewcode-back" href="../../../api_docs/toolshed/all.html#bioblend.toolshed.repositories.ToolShedClient.get_ordered_installable_revisions">[docs]</a>    <span class="k">def</span> <span class="nf">get_ordered_installable_revisions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">owner</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the ordered list of changeset revision hash strings that are associated</span>
<span class="sd">        with installable revisions.  As in the changelog, the list is ordered oldest to newest.</span>

<span class="sd">        :type name: string</span>
<span class="sd">        :param name: the name of the repository</span>

<span class="sd">        :type owner: string</span>
<span class="sd">        :param owner: the owner of the repository</span>

<span class="sd">        :rtype: list</span>
<span class="sd">        :return: List of changeset revision hash string from oldest to newest</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">+</span> <span class="s">&#39;/get_ordered_installable_revisions&#39;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;owner&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">owner</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">Client</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">r</span>
</div>
<div class="viewcode-block" id="ToolShedClient.get_repository_revision_install_info"><a class="viewcode-back" href="../../../api_docs/toolshed/all.html#bioblend.toolshed.repositories.ToolShedClient.get_repository_revision_install_info">[docs]</a>    <span class="k">def</span> <span class="nf">get_repository_revision_install_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">owner</span><span class="p">,</span> <span class="n">changeset_revision</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of dictionaries of metadata about a certain changeset</span>
<span class="sd">        revision for a single tool.</span>

<span class="sd">        :type name: string</span>
<span class="sd">        :param name: the name of the repository</span>

<span class="sd">        :type owner: string</span>
<span class="sd">        :param owner: the owner of the repository</span>

<span class="sd">        :type changeset_revision: string</span>
<span class="sd">        :param changeset_revision: the changset_revision of the RepositoryMetadata</span>
<span class="sd">                                   object associated with the repository</span>

<span class="sd">        :rtype: List of dictionaries</span>
<span class="sd">        :return: Returns a list of the following dictionaries:</span>
<span class="sd">                  - a dictionary defining the repository</span>
<span class="sd">                  - a dictionary defining the repository revision (RepositoryMetadata)</span>
<span class="sd">                  - a dictionary including the additional information required to</span>
<span class="sd">                    install the repository</span>

<span class="sd">                 For example::</span>

<span class="sd">                     [{u&#39;times_downloaded&#39;: 269, u&#39;user_id&#39;: u&#39;1de29d50c3c44272&#39;, u&#39;description&#39;: u&#39;Galaxy Freebayes Bayesian genetic variant detector tool&#39;, u&#39;deleted&#39;: False, u&#39;deprecated&#39;: False, u&#39;private&#39;: False, u&#39;long_description&#39;: u&#39;Galaxy Freebayes Bayesian genetic variant detector tool originally included in the Galaxy code distribution but migrated to the tool shed.&#39;, u&#39;url&#39;: u&#39;/api/repositories/491b7a3fddf9366f&#39;, u&#39;owner&#39;: u&#39;devteam&#39;, u&#39;id&#39;: u&#39;491b7a3fddf9366f&#39;, u&#39;name&#39;: u&#39;freebayes&#39;},</span>
<span class="sd">                     {u&#39;repository_id&#39;: u&#39;491b7a3fddf9366f&#39;, u&#39;has_repository_dependencies&#39;: False, u&#39;includes_tools_for_display_in_tool_panel&#39;: True, u&#39;url&#39;: u&#39;/api/repository_revisions/504be8aaa652c154&#39;, u&#39;malicious&#39;: False, u&#39;includes_workflows&#39;: False, u&#39;downloadable&#39;: True, u&#39;includes_tools&#39;: True, u&#39;changeset_revision&#39;: u&#39;d291dc763c4c&#39;, u&#39;id&#39;: u&#39;504be8aaa652c154&#39;, u&#39;includes_tool_dependencies&#39;: True, u&#39;includes_datatypes&#39;: False}, {u&#39;freebayes&#39;: [u&#39;Galaxy Freebayes Bayesian genetic variant detector tool&#39;, u&#39;http://takadonet@toolshed.g2.bx.psu.edu/repos/devteam/freebayes&#39;, u&#39;d291dc763c4c&#39;, u&#39;9&#39;, u&#39;devteam&#39;, {},</span>
<span class="sd">                     {u&#39;freebayes/0.9.6_9608597d12e127c847ae03aa03440ab63992fedf&#39;: {u&#39;repository_name&#39;: u&#39;freebayes&#39;, u&#39;name&#39;: u&#39;freebayes&#39;, u&#39;readme&#39;: u&#39;FreeBayes requires g++ and the standard C and C++ development libraries. Additionally, cmake is required for building the BamTools API.&#39;, u&#39;version&#39;: u&#39;0.9.6_9608597d12e127c847ae03aa03440ab63992fedf&#39;, u&#39;repository_owner&#39;: u&#39;devteam&#39;, u&#39;changeset_revision&#39;: u&#39;d291dc763c4c&#39;, u&#39;type&#39;: u&#39;package&#39;}, u&#39;samtools/0.1.18&#39;: {u&#39;repository_name&#39;: u&#39;freebayes&#39;, u&#39;name&#39;: u&#39;samtools&#39;, u&#39;readme&#39;: u&#39;Compiling SAMtools requires the ncurses and zlib development libraries.&#39;, u&#39;version&#39;: u&#39;0.1.18&#39;, u&#39;repository_owner&#39;: u&#39;devteam&#39;, u&#39;changeset_revision&#39;: u&#39;d291dc763c4c&#39;, u&#39;type&#39;: u&#39;package&#39;}}]}]</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">+</span> <span class="s">&#39;/get_repository_revision_install_info&#39;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;owner&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">owner</span>
        <span class="n">params</span><span class="p">[</span><span class="s">&#39;changeset_revision&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">changeset_revision</span>

        <span class="k">return</span> <span class="n">Client</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ToolShedClient.repository_revisions"><a class="viewcode-back" href="../../../api_docs/toolshed/all.html#bioblend.toolshed.repositories.ToolShedClient.repository_revisions">[docs]</a>    <span class="k">def</span> <span class="nf">repository_revisions</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">downloadable</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">malicious</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">tools_functionally_correct</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">missing_test_components</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">do_not_test</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">includes_tools</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">test_install_error</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
            <span class="n">skip_tool_test</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a (possibly filtered) list of dictionaries that include information</span>
<span class="sd">        about all repository revisions.  The following parameters can be used to</span>
<span class="sd">        filter the list.</span>

<span class="sd">        :type downloadable: Boolean</span>
<span class="sd">        :param downloadable: Can the tool be downloaded</span>

<span class="sd">        :type malicious: Boolean</span>
<span class="sd">        :param malicious:</span>

<span class="sd">        :type tools_functionally_correct: Boolean</span>
<span class="sd">        :param tools_functionally_correct:</span>

<span class="sd">        :type missing_test_components: Boolean</span>
<span class="sd">        :param missing_test_components:</span>

<span class="sd">        :type do_not_test: Boolean</span>
<span class="sd">        :param do_not_test:</span>

<span class="sd">        :type includes_tools: Boolean</span>
<span class="sd">        :param includes_tools:</span>

<span class="sd">        :type test_install_error: Boolean</span>
<span class="sd">        :param test_install_error:</span>

<span class="sd">        :type skip_tool_test: Boolean</span>
<span class="sd">        :param skip_tool_test:</span>

<span class="sd">        :rtype: List of dictionaries</span>
<span class="sd">        :return: Returns a (possibly filtered) list of dictionaries that include</span>
<span class="sd">                 information about all repository revisions.</span>
<span class="sd">                 For example::</span>

<span class="sd">                     [{u&#39;repository_id&#39;: u&#39;78f2604ff5e65707&#39;, u&#39;has_repository_dependencies&#39;: False, u&#39;includes_tools_for_display_in_tool_panel&#39;: True, u&#39;url&#39;: u&#39;/api/repository_revisions/92250afff777a169&#39;, u&#39;malicious&#39;: False, u&#39;includes_workflows&#39;: False, u&#39;downloadable&#39;: True, u&#39;includes_tools&#39;: True, u&#39;changeset_revision&#39;: u&#39;6e26c5a48e9a&#39;, u&#39;id&#39;: u&#39;92250afff777a169&#39;, u&#39;includes_tool_dependencies&#39;: False, u&#39;includes_datatypes&#39;: False},</span>
<span class="sd">                     {u&#39;repository_id&#39;: u&#39;f9662009da7bfce0&#39;, u&#39;has_repository_dependencies&#39;: False, u&#39;includes_tools_for_display_in_tool_panel&#39;: True, u&#39;url&#39;: u&#39;/api/repository_revisions/d3823c748ae2205d&#39;, u&#39;malicious&#39;: False, u&#39;includes_workflows&#39;: False, u&#39;downloadable&#39;: True, u&#39;includes_tools&#39;: True, u&#39;changeset_revision&#39;: u&#39;15a54fa11ad7&#39;, u&#39;id&#39;: u&#39;d3823c748ae2205d&#39;, u&#39;includes_tool_dependencies&#39;: False, u&#39;includes_datatypes&#39;: False}]</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c"># Not using &#39;_make_url&#39; or &#39;_get&#39; to create url since the module id used</span>
        <span class="c"># to create url is not the same as needed for this method</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gi</span><span class="o">.</span><span class="n">url</span> <span class="o">+</span> <span class="s">&#39;/repository_revisions&#39;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c"># nice and long... my god!</span>
        <span class="k">if</span> <span class="n">downloadable</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;downloadable&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;True&#39;</span>
        <span class="k">if</span> <span class="n">malicious</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;malicious&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;True&#39;</span>
        <span class="k">if</span> <span class="n">tools_functionally_correct</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;tools_functionally_correct&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;True&#39;</span>
        <span class="k">if</span> <span class="n">missing_test_components</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;missing_test_components&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;True&#39;</span>
        <span class="k">if</span> <span class="n">do_not_test</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;do_not_test&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;True&#39;</span>
        <span class="k">if</span> <span class="n">includes_tools</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;includes_tools&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;True&#39;</span>
        <span class="k">if</span> <span class="n">test_install_error</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;test_install_error&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;True&#39;</span>
        <span class="k">if</span> <span class="n">skip_tool_test</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;skip_tool_test&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;True&#39;</span>

        <span class="k">return</span> <span class="n">Client</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ToolShedClient.show_repository_revision"><a class="viewcode-back" href="../../../api_docs/toolshed/all.html#bioblend.toolshed.repositories.ToolShedClient.show_repository_revision">[docs]</a>    <span class="k">def</span> <span class="nf">show_repository_revision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metadata_id</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns a dictionary that includes information about a specified repository</span>
<span class="sd">        revision.</span>

<span class="sd">        :type metadata_id: string</span>
<span class="sd">        :param metadata_id: Encoded repository metadata ID</span>

<span class="sd">        :rtype: dictionary</span>
<span class="sd">        :return: Returns a dictionary that includes information about a specified</span>
<span class="sd">                 repository revision.</span>
<span class="sd">                 For example::</span>

<span class="sd">                     {u&#39;repository_id&#39;: u&#39;491b7a3fddf9366f&#39;,</span>
<span class="sd">                      u&#39;has_repository_dependencies&#39;: False,</span>
<span class="sd">                      u&#39;includes_tools_for_display_in_tool_panel&#39;: True,</span>
<span class="sd">                      u&#39;test_install_error&#39;: False,</span>
<span class="sd">                      u&#39;url&#39;: u&#39;/api/repository_revisions/504be8aaa652c154&#39;,</span>
<span class="sd">                      u&#39;malicious&#39;: False,</span>
<span class="sd">                      u&#39;includes_workflows&#39;: False,</span>
<span class="sd">                      u&#39;id&#39;: u&#39;504be8aaa652c154&#39;,</span>
<span class="sd">                      u&#39;do_not_test&#39;: False,</span>
<span class="sd">                      u&#39;downloadable&#39;: True,</span>
<span class="sd">                      u&#39;includes_tools&#39;: True,</span>
<span class="sd">                      u&#39;tool_test_results&#39;: {u&#39;missing_test_components&#39;: [],,</span>
<span class="sd">                      u&#39;includes_datatypes&#39;: False}</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c"># Not using &#39;_make_url&#39; or &#39;_get&#39; to create url since the module id used</span>
        <span class="c"># to create url is not the same as needed for this method</span>
        <span class="c"># since metadata_id has to be defined, easy to create the url here</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gi</span><span class="o">.</span><span class="n">url</span> <span class="o">+</span> <span class="s">&#39;/repository_revisions/&#39;</span> <span class="o">+</span> <span class="n">metadata_id</span>

        <span class="k">return</span> <span class="n">Client</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ToolShedClient.get_categories"><a class="viewcode-back" href="../../../api_docs/toolshed/all.html#bioblend.toolshed.repositories.ToolShedClient.get_categories">[docs]</a>    <span class="k">def</span> <span class="nf">get_categories</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of dictionaries that contain descriptions of the</span>
<span class="sd">        repository categories found on the given Tool Shed instance.</span>

<span class="sd">        :rtype: list</span>
<span class="sd">        :return: A list of dictionaries containing information about</span>
<span class="sd">                 repository categories present in the Tool Shed.</span>
<span class="sd">                 For example::</span>

<span class="sd">                    [{u&#39;deleted&#39;: False,</span>
<span class="sd">                      u&#39;description&#39;: u&#39;Tools for manipulating data&#39;,</span>
<span class="sd">                      u&#39;id&#39;: u&#39;175812cd7caaf439&#39;,</span>
<span class="sd">                      u&#39;model_class&#39;: u&#39;Category&#39;,</span>
<span class="sd">                      u&#39;name&#39;: u&#39;Text Manipulation&#39;,</span>
<span class="sd">                      u&#39;url&#39;: u&#39;/api/categories/175812cd7caaf439&#39;},]</span>

<span class="sd">        .. versionadded:: 0.5.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">urljoin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="s">&#39;categories&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Client</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="ToolShedClient.update_repository"><a class="viewcode-back" href="../../../api_docs/toolshed/all.html#bioblend.toolshed.repositories.ToolShedClient.update_repository">[docs]</a>    <span class="k">def</span> <span class="nf">update_repository</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">tar_ball_path</span><span class="p">,</span> <span class="n">commit_message</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the contents of a tool shed repository with specified tar</span>
<span class="sd">        ball.</span>

<span class="sd">        :type id: string</span>
<span class="sd">        :param id: Encoded repository ID</span>

<span class="sd">        :type tar_ball_path: string</span>
<span class="sd">        :param tar_ball_path: Path to file containing tar ball to upload.</span>

<span class="sd">        :type commit_message: string</span>
<span class="sd">        :param commit_message: Commit message used for underlying mercurial</span>
<span class="sd">                               repository backing tool shed repository.</span>

<span class="sd">        :rtype: dict</span>
<span class="sd">        :return: Returns a dictionary that includes repository content</span>
<span class="sd">                 warnings. Most valid uploads will result in no such</span>
<span class="sd">                 warning and an exception will be raised generally if</span>
<span class="sd">                 there are problems.</span>

<span class="sd">                 For example a successful upload will look like::</span>

<span class="sd">                     {u&#39;content_alert&#39;: u&#39;&#39;, u&#39;message&#39;: u&#39;&#39;}</span>

<span class="sd">        .. versionadded:: 0.5.2</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gi</span><span class="o">.</span><span class="n">_make_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;/changeset_revision&#39;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">commit_message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s">&#39;commit_message&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">commit_message</span>
        <span class="n">payload</span><span class="p">[</span><span class="s">&quot;file&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">attach_file</span><span class="p">(</span><span class="n">tar_ball_path</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Client</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">files_attached</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s">&quot;file&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="ToolShedClient.create_repository"><a class="viewcode-back" href="../../../api_docs/toolshed/all.html#bioblend.toolshed.repositories.ToolShedClient.create_repository">[docs]</a>    <span class="k">def</span> <span class="nf">create_repository</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">synopsis</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&quot;unrestricted&quot;</span><span class="p">,</span>
                          <span class="n">remote_repository_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">homepage_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">category_ids</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new repository in a Tool Shed</span>

<span class="sd">        :type name: str</span>
<span class="sd">        :param name: Name of the repository</span>

<span class="sd">        :type synopsis: str</span>
<span class="sd">        :param synopsis: Synopsis of the repository</span>

<span class="sd">        :type description: str</span>
<span class="sd">        :param description: Optional description of the repository</span>

<span class="sd">        :type type: str</span>
<span class="sd">        :param type: type of the repository. One of &quot;unrestricted&quot;,</span>
<span class="sd">                     &quot;repository_suite_definition&quot;, or &quot;tool_dependency_definition&quot;</span>

<span class="sd">        :type remote_repository_url: str</span>
<span class="sd">        :param remote_repository_url: Remote URL (e.g. github/bitbucket repository)</span>

<span class="sd">        :type homepage_url: str</span>
<span class="sd">        :param homepage_url: Upstream&#39;s homepage for the project.</span>

<span class="sd">        :type category_ids: list</span>
<span class="sd">        :param category_ids: List of encoded category IDs</span>

<span class="sd">        :rtype: dict</span>
<span class="sd">        :return: a dictionary containing information about the new repository.</span>
<span class="sd">                 For example::</span>

<span class="sd">                    {</span>
<span class="sd">                        &quot;deleted&quot;: false,</span>
<span class="sd">                        &quot;deprecated&quot;: false,</span>
<span class="sd">                        &quot;description&quot;: &quot;new_synopsis&quot;,</span>
<span class="sd">                        &quot;homepage_url&quot;: &quot;https://github.com/galaxyproject/&quot;,</span>
<span class="sd">                        &quot;id&quot;: &quot;8cf91205f2f737f4&quot;,</span>
<span class="sd">                        &quot;long_description&quot;: &quot;this is some repository&quot;,</span>
<span class="sd">                        &quot;model_class&quot;: &quot;Repository&quot;,</span>
<span class="sd">                        &quot;name&quot;: &quot;new_repo_17&quot;,</span>
<span class="sd">                        &quot;owner&quot;: &quot;qqqqqq&quot;,</span>
<span class="sd">                        &quot;private&quot;: false,</span>
<span class="sd">                        &quot;remote_repository_url&quot;: &quot;https://github.com/galaxyproject/tools-devteam&quot;,</span>
<span class="sd">                        &quot;times_downloaded&quot;: 0,</span>
<span class="sd">                        &quot;type&quot;: &quot;unrestricted&quot;,</span>
<span class="sd">                        &quot;user_id&quot;: &quot;adb5f5c93f827949&quot;</span>
<span class="sd">                    }</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s">&#39;synopsis&#39;</span><span class="p">:</span> <span class="n">synopsis</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>

        <span class="k">if</span> <span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">description</span>

        <span class="k">if</span> <span class="nb">type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span>

        <span class="k">if</span> <span class="n">remote_repository_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s">&#39;remote_repository_url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">remote_repository_url</span>

        <span class="k">if</span> <span class="n">homepage_url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s">&#39;homepage_url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">homepage_url</span>

        <span class="k">if</span> <span class="n">category_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">payload</span><span class="p">[</span><span class="s">&#39;category_ids[]&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">category_ids</span>

        <span class="k">return</span> <span class="n">Client</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">BioBlend 0.5.4-dev documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &raquo;</li>
          <li class="nav-item nav-item-2"><a href="../../bioblend.html" >bioblend</a> &raquo;</li>
          <li class="nav-item nav-item-3"><a href="../toolshed.html" >bioblend.toolshed</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2012-2015, Enis Afgan.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>