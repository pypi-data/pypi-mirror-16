<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>thorn &mdash; Thorn 1.3.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/thorn.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Thorn 1.3.0 documentation" href="../index.html" />
    <link rel="up" title="API Reference" href="index.html" />
    <link rel="next" title="thorn.app" href="thorn.app.html" />
    <link rel="prev" title="API Reference" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="thorn.app.html" title="thorn.app"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="API Reference"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Thorn 1.3.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">API Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="thorn">
<h1>thorn<a class="headerlink" href="#thorn" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-thorn"></span><p>Python Webhook and Event Framework</p>
<dl class="class">
<dt id="thorn.Thorn">
<em class="property">class </em><code class="descclassname">thorn.</code><code class="descname">Thorn</code><span class="sig-paren">(</span><em>dispatcher=None</em>, <em>set_as_current=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/app.html#Thorn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="thorn.Thorn.Dispatcher">
<code class="descname">Dispatcher</code><a class="reference internal" href="../_modules/thorn/app.html#Thorn.Dispatcher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.Dispatcher" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.Event">
<code class="descname">Event</code><a class="reference internal" href="../_modules/thorn/app.html#Thorn.Event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.Event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.ModelEvent">
<code class="descname">ModelEvent</code><a class="reference internal" href="../_modules/thorn/app.html#Thorn.ModelEvent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.ModelEvent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.Request">
<code class="descname">Request</code><a class="reference internal" href="../_modules/thorn/app.html#Thorn.Request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.Request" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.Settings">
<code class="descname">Settings</code><a class="reference internal" href="../_modules/thorn/app.html#Thorn.Settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.Settings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.Subscriber">
<code class="descname">Subscriber</code><a class="headerlink" href="#thorn.Thorn.Subscriber" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.Subscribers">
<code class="descname">Subscribers</code><a class="headerlink" href="#thorn.Thorn.Subscribers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.Thorn.autodetect_env">
<code class="descname">autodetect_env</code><span class="sig-paren">(</span><em>apply=&lt;operator.methodcaller object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/app.html#Thorn.autodetect_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.autodetect_env" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.config">
<code class="descname">config</code><a class="headerlink" href="#thorn.Thorn.config" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.dispatcher">
<code class="descname">dispatcher</code><a class="reference internal" href="../_modules/thorn/app.html#Thorn.dispatcher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.dispatcher" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.dispatchers">
<code class="descname">dispatchers</code><em class="property"> = {u'default': u'thorn.dispatch.base:Dispatcher', u'celery': u'thorn.dispatch.celery:Dispatcher', u'disabled': u'thorn.dispatch.disabled:Dispatcher'}</em><a class="headerlink" href="#thorn.Thorn.dispatchers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.env">
<code class="descname">env</code><a class="reference internal" href="../_modules/thorn/app.html#Thorn.env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.env" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.environments">
<code class="descname">environments</code><em class="property"> = set([u'thorn.environment.django:DjangoEnv'])</em><a class="headerlink" href="#thorn.Thorn.environments" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.event_cls">
<code class="descname">event_cls</code><em class="property"> = u'thorn.events:Event'</em><a class="headerlink" href="#thorn.Thorn.event_cls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.hmac_sign">
<code class="descname">hmac_sign</code><a class="reference internal" href="../_modules/thorn/app.html#Thorn.hmac_sign"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.hmac_sign" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.model_event_cls">
<code class="descname">model_event_cls</code><em class="property"> = u'thorn.events:ModelEvent'</em><a class="headerlink" href="#thorn.Thorn.model_event_cls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.model_reverser">
<code class="descname">model_reverser</code><a class="reference internal" href="../_modules/thorn/app.html#Thorn.model_reverser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.model_reverser" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.request_cls">
<code class="descname">request_cls</code><em class="property"> = u'thorn.request:Request'</em><a class="headerlink" href="#thorn.Thorn.request_cls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.reverse">
<code class="descname">reverse</code><a class="headerlink" href="#thorn.Thorn.reverse" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.Thorn.set_current">
<code class="descname">set_current</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/app.html#Thorn.set_current"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.set_current" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.Thorn.set_default">
<code class="descname">set_default</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/app.html#Thorn.set_default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.set_default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.settings">
<code class="descname">settings</code><a class="reference internal" href="../_modules/thorn/app.html#Thorn.settings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.settings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.settings_cls">
<code class="descname">settings_cls</code><em class="property"> = u'thorn.conf:Settings'</em><a class="headerlink" href="#thorn.Thorn.settings_cls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.signals">
<code class="descname">signals</code><a class="headerlink" href="#thorn.Thorn.signals" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.Thorn.subclass_with_self">
<code class="descname">subclass_with_self</code><span class="sig-paren">(</span><em>Class</em>, <em>name=None</em>, <em>attribute=u'app'</em>, <em>reverse=None</em>, <em>keep_reduce=False</em>, <em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/app.html#Thorn.subclass_with_self"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.subclass_with_self" title="Permalink to this definition">¶</a></dt>
<dd><p>Subclass an app-compatible class by setting its app attribute
to this instance.</p>
<p>App-compatible means the class has an &#8216;app&#8217; attribute providing
the default app, e.g.: <code class="docutils literal"><span class="pre">class</span> <span class="pre">Foo(object):</span> <span class="pre">app</span> <span class="pre">=</span> <span class="pre">None</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>Class</strong> &#8211; The class to subclass.</li>
<li><strong>name</strong> &#8211; Custom name for the target subclass.</li>
<li><strong>attribute</strong> &#8211; Name of the attribute holding the app.
Default is <code class="docutils literal"><span class="pre">&quot;app&quot;</span></code>.</li>
<li><strong>reverse</strong> &#8211; Reverse path to this object used for pickling
purposes.  E.g. for <code class="docutils literal"><span class="pre">app.AsyncResult</span></code> use <code class="docutils literal"><span class="pre">&quot;AsyncResult&quot;</span></code>.</li>
<li><strong>keep_reduce</strong> &#8211; If enabled a custom <code class="docutils literal"><span class="pre">__reduce__</span></code> implementation
will not be provided.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="thorn.Thorn.webhook_model">
<code class="descname">webhook_model</code><a class="reference internal" href="../_modules/thorn/app.html#Thorn.webhook_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Thorn.webhook_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="thorn.Event">
<em class="property">class </em><code class="descclassname">thorn.</code><code class="descname">Event</code><span class="sig-paren">(</span><em>name</em>, <em>timeout=None</em>, <em>dispatcher=None</em>, <em>retry=None</em>, <em>retry_max=None</em>, <em>retry_delay=None</em>, <em>app=None</em>, <em>recipient_validators=None</em>, <em>subscribers=None</em>, <em>request_data=None</em>, <em>allow_keepalive=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#Event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Event" title="Permalink to this definition">¶</a></dt>
<dd><p>Webhook Event.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of this event.
Namespaces can be dot-separated, and if so subscribers can glob-match
based on the parts in the name (e.g. <code class="docutils literal"><span class="pre">&quot;order.created&quot;</span></code>).</li>
<li><strong>timeout</strong> &#8211; Default request timeout for this event.</li>
<li><strong>retry</strong> &#8211; Enable/disable retries when dispatching this event fails
(disabled by default).</li>
<li><strong>retry_max</strong> &#8211; Max number of retries (3 by default).</li>
<li><strong>retry_delay</strong> &#8211; Delay between retries (60 seconds by default).</li>
<li><strong>recipient_validators</strong> &#8211; <p>List of functions validating the recipient
URL string.  Functions must return False if the URL is blocked.
Default is to only allow HTTP and HTTPS, with respective reserved
ports 80 and 443, and to block internal IP networks, and can
be changed using the <a class="reference internal" href="../userguide/configuration.html#std:setting-THORN_RECIPIENT_VALIDATORS"><code class="xref std std-setting docutils literal"><span class="pre">THORN_RECIPIENT_VALIDATORS</span></code></a> setting:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">recipient_validators</span><span class="o">=</span><span class="p">[</span>
    <span class="n">thorn</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">block_internal_ips</span><span class="p">(),</span>
    <span class="n">thorn</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">ensure_protocol</span><span class="p">(</span><span class="s1">&#39;http&#39;</span><span class="p">,</span> <span class="s1">&#39;https&#39;</span><span class="p">),</span>
    <span class="n">thorn</span><span class="o">.</span><span class="n">validators</span><span class="o">.</span><span class="n">ensure_port</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">443</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>
</div>
<p>WARNING: <a class="reference internal" href="thorn.validators.html#thorn.validators.block_internal_ips" title="thorn.validators.block_internal_ips"><code class="xref py py-func docutils literal"><span class="pre">block_internal_ips()</span></code></a> will only
test for reserved internal networks, and not private networks
with a public IP address.  You can block those using
<a class="reference internal" href="thorn.validators.html#thorn.validators.block_cidr_network" title="thorn.validators.block_cidr_network"><code class="xref py py-class docutils literal"><span class="pre">block_cidr_network</span></code></a>.</p>
</li>
<li><strong>subscribers</strong> &#8211; Additional subscribers, as a list of URLs,
subscriber model objects, or callback functions returning these</li>
<li><strong>request_data</strong> &#8211; Optional mapping of extra data to inject into
event payloads,</li>
<li><strong>allow_keepalive</strong> &#8211; Flag to disable HTTP connection keepalive
for this event only.  Keepalive is enabled by default.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="thorn.Event.allow_keepalive">
<code class="descname">allow_keepalive</code><em class="property"> = True</em><a class="headerlink" href="#thorn.Event.allow_keepalive" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Event.app">
<code class="descname">app</code><em class="property"> = None</em><a class="headerlink" href="#thorn.Event.app" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Event.dispatcher">
<code class="descname">dispatcher</code><a class="headerlink" href="#thorn.Event.dispatcher" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.Event.prepare_payload">
<code class="descname">prepare_payload</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#Event.prepare_payload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Event.prepare_payload" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.Event.prepare_recipient_validators">
<code class="descname">prepare_recipient_validators</code><span class="sig-paren">(</span><em>validators</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#Event.prepare_recipient_validators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Event.prepare_recipient_validators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Event.prepared_recipient_validators">
<code class="descname">prepared_recipient_validators</code><a class="reference internal" href="../_modules/thorn/events.html#Event.prepared_recipient_validators"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Event.prepared_recipient_validators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Event.recipient_validators">
<code class="descname">recipient_validators</code><em class="property"> = None</em><a class="headerlink" href="#thorn.Event.recipient_validators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.Event.send">
<code class="descname">send</code><span class="sig-paren">(</span><em>data</em>, <em>sender=None</em>, <em>on_success=None</em>, <em>on_error=None</em>, <em>timeout=None</em>, <em>on_timeout=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#Event.send"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Event.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Send event to all subscribers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> &#8211; Event payload (must be json serializable).</li>
<li><strong>sender</strong> &#8211; Optional event sender, as a
<a class="reference external" href="http://django.readthedocs.io/en/latest/ref/contrib/auth.html#django.contrib.auth.models.User" title="(in Django v1.11)"><code class="xref py py-class docutils literal"><span class="pre">User</span></code></a> instance.</li>
<li><strong>timeout</strong> &#8211; Specify custom HTTP request timeout
overriding the <a class="reference internal" href="../userguide/configuration.html#std:setting-THORN_EVENT_TIMEOUT"><code class="xref std std-setting docutils literal"><span class="pre">THORN_EVENT_TIMEOUT</span></code></a> setting.</li>
<li><strong>on_success</strong> &#8211; Callback called for each HTTP request
if the request succeeds.  Must take single
<a class="reference internal" href="thorn.request.html#thorn.request.Request" title="thorn.request.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> argument.</li>
<li><strong>on_timeout</strong> &#8211; Callback called for each HTTP request
if the request times out.  Takes two arguments:
a <a class="reference internal" href="thorn.request.html#thorn.request.Request" title="thorn.request.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a>, and the time out
exception instance.</li>
<li><strong>on_error</strong> &#8211; Callback called for each HTTP request
if the request fails.  Takes two arguments:
a <a class="reference internal" href="thorn.request.html#thorn.request.Request" title="thorn.request.Request"><code class="xref py py-class docutils literal"><span class="pre">Request</span></code></a> argument, and
the error exception instance.</li>
<li><strong>context</strong> &#8211; Extra context to pass to subscriber callbacks</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="thorn.Event.subscribers">
<code class="descname">subscribers</code><a class="headerlink" href="#thorn.Event.subscribers" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="thorn.ModelEvent">
<em class="property">class </em><code class="descclassname">thorn.</code><code class="descname">ModelEvent</code><span class="sig-paren">(</span><em>name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Event related to model changes.</p>
<p>This event type follows a specific payload format:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;event&quot;</span><span class="p">:</span> <span class="s2">&quot;(str)event_name&quot;</span><span class="p">,</span>
 <span class="nt">&quot;ref&quot;</span><span class="p">:</span> <span class="s2">&quot;(URL)model_location&quot;</span><span class="p">,</span>
 <span class="nt">&quot;sender&quot;</span><span class="p">:</span> <span class="s2">&quot;(User pk)optional_sender&quot;</span><span class="p">,</span>
 <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;event specific data&quot;</span><span class="p">:</span> <span class="s2">&quot;value&quot;</span><span class="p">}}</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of event.</li>
<li><strong>reverse</strong> &#8211; A function that takes a model instance and returns
the canonical URL for that resource.</li>
<li><strong>sender_field</strong> &#8211; Field used as a sender for events, e.g. <code class="docutils literal"><span class="pre">&quot;account.user&quot;</span></code>,
will use <code class="docutils literal"><span class="pre">instance.account.user</span></code>.</li>
<li><strong>$field__$op</strong> &#8211; <p>Optional filter arguments to filter the model
instances to dispatch for.  These keyword arguments
can be defined just like the arguments to a Django query set,
the only difference being that you have to specify an operator
for every field: this means <code class="docutils literal"><span class="pre">last_name=&quot;jerry&quot;</span></code> does not work,
and you have to use <code class="docutils literal"><span class="pre">last_name__eq=&quot;jerry&quot;</span></code> instead.</p>
<p>See <a class="reference internal" href="thorn.utils.functional.html#thorn.utils.functional.Q" title="thorn.utils.functional.Q"><code class="xref py py-class docutils literal"><span class="pre">Q</span></code></a> for more information.</p>
</li>
<li><strong>signal_dispatcher</strong> &#8211; Custom
<code class="xref py py-class docutils literal"><span class="pre">signal_dispatcher</span></code> used to
connect this event to a model signal.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="thorn.ModelEvent.connect_model">
<code class="descname">connect_model</code><span class="sig-paren">(</span><em>model</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.connect_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.connect_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.dispatches_on_change">
<code class="descname">dispatches_on_change</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.dispatches_on_change"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.dispatches_on_change" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.dispatches_on_create">
<code class="descname">dispatches_on_create</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.dispatches_on_create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.dispatches_on_create" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.dispatches_on_delete">
<code class="descname">dispatches_on_delete</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.dispatches_on_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.dispatches_on_delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.dispatches_on_m2m_add">
<code class="descname">dispatches_on_m2m_add</code><span class="sig-paren">(</span><em>related_field</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.dispatches_on_m2m_add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.dispatches_on_m2m_add" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.dispatches_on_m2m_clear">
<code class="descname">dispatches_on_m2m_clear</code><span class="sig-paren">(</span><em>related_field</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.dispatches_on_m2m_clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.dispatches_on_m2m_clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.dispatches_on_m2m_remove">
<code class="descname">dispatches_on_m2m_remove</code><span class="sig-paren">(</span><em>related_field</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.dispatches_on_m2m_remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.dispatches_on_m2m_remove" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.instance_data">
<code class="descname">instance_data</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.instance_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.instance_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get event data from <code class="docutils literal"><span class="pre">instance.webhook_payload()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.instance_sender">
<code class="descname">instance_sender</code><span class="sig-paren">(</span><em>instance</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.instance_sender"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.instance_sender" title="Permalink to this definition">¶</a></dt>
<dd><p>Get event <code class="docutils literal"><span class="pre">sender</span></code> from model instance.</p>
</dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.on_signal">
<code class="descname">on_signal</code><span class="sig-paren">(</span><em>instance</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.on_signal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.on_signal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.send">
<code class="descname">send</code><span class="sig-paren">(</span><em>instance</em>, <em>data=None</em>, <em>sender=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.send"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Send event for model <code class="docutils literal"><span class="pre">instance</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> &#8211; Event specific data.</td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="#thorn.Event.send" title="thorn.Event.send"><code class="xref py py-meth docutils literal"><span class="pre">Event.send()</span></code></a> for more arguments supported.</p>
</dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.send_from_instance">
<code class="descname">send_from_instance</code><span class="sig-paren">(</span><em>instance</em>, <em>context={}</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.send_from_instance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.send_from_instance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.should_dispatch">
<code class="descname">should_dispatch</code><span class="sig-paren">(</span><em>instance</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.should_dispatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.should_dispatch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.ModelEvent.signal_dispatcher">
<code class="descname">signal_dispatcher</code><a class="headerlink" href="#thorn.ModelEvent.signal_dispatcher" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.ModelEvent.to_message">
<code class="descname">to_message</code><span class="sig-paren">(</span><em>data</em>, <em>instance=None</em>, <em>sender=None</em>, <em>ref=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/events.html#ModelEvent.to_message"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.ModelEvent.to_message" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="thorn.Q">
<em class="property">class </em><code class="descclassname">thorn.</code><code class="descname">Q</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/utils/functional.html#Q"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Q" title="Permalink to this definition">¶</a></dt>
<dd><p>Object query node.</p>
<p>This class works like <a class="reference external" href="http://django.readthedocs.io/en/latest/ref/models/querysets.html#django.db.models.Q" title="(in Django v1.11)"><code class="xref py py-class docutils literal"><span class="pre">django.db.models.Q</span></code></a>, but is used for
filtering regular Python objects instead of database rows.</p>
<p><strong>Examples</strong></p>
<ul>
<li><p class="first">Match object with <code class="docutils literal"><span class="pre">last_name</span></code> attribute set to &#8220;Costanza&#8221;:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">Q</span><span class="p">(</span><span class="n">last_name__eq</span><span class="o">=</span><span class="s2">&quot;Costanza&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Match object with <code class="docutils literal"><span class="pre">author.last_name</span></code> attribute set to &#8220;Benes&#8221;:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">Q</span><span class="p">(</span><span class="n">author__last_name__eq</span><span class="o">=</span><span class="s2">&quot;Benes&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">You are not allowed to specify any key without an operator,
event though the following would be fine using Django`s Q objects:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">Q</span><span class="p">(</span><span class="n">author__last_name</span><span class="o">=</span><span class="s2">&quot;Benes&quot;</span><span class="p">)</span>   <span class="c1"># &lt;-- ERROR, will raise ValueError</span>
</pre></div>
</div>
</li>
<li><p class="first">Attributes can be nested arbitrarily deep:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">Q</span><span class="p">(</span><span class="n">a__b__c__d__e__f__g__x__gt</span><span class="o">=</span><span class="mf">3.03</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">The special <code class="docutils literal"><span class="pre">*__eq=True</span></code> means &#8220;match any <em>true-ish</em> value&#8221;:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">Q</span><span class="p">(</span><span class="n">author__account__is_staff__eq</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Similarly the <code class="docutils literal"><span class="pre">*__eq=False</span></code> means &#8220;match any <em>false-y</em>&#8221; value&#8221;:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">Q</span><span class="p">(</span><span class="n">author__account__is_disabled</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p>See <a class="reference internal" href="../userguide/events.html#events-model-filtering-operators"><span class="std std-ref">Supported operators</span></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><code class="xref py py-class docutils literal"><span class="pre">collections.Callable</span></code>, to match an object with
the given predicates, call the return value with the object to match:
<code class="docutils literal"><span class="pre">Q(x__eq==808)(obj)</span></code>.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="thorn.Q.apply_op">
<code class="descname">apply_op</code><span class="sig-paren">(</span><em>getter</em>, <em>op</em>, <em>rhs</em>, <em>obj</em>, <em>*args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/utils/functional.html#Q.apply_op"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Q.apply_op" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.Q.apply_trans_op">
<code class="descname">apply_trans_op</code><span class="sig-paren">(</span><em>getter</em>, <em>op</em>, <em>rhs</em>, <em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/utils/functional.html#Q.apply_trans_op"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Q.apply_trans_op" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Q.branches">
<code class="descname">branches</code><em class="property"> = {False: &lt;built-in function truth&gt;, True: &lt;built-in function not_&gt;}</em><a class="headerlink" href="#thorn.Q.branches" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.Q.compile">
<code class="descname">compile</code><span class="sig-paren">(</span><em>fields</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/utils/functional.html#Q.compile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Q.compile" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.Q.compile_node">
<code class="descname">compile_node</code><span class="sig-paren">(</span><em>field</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/utils/functional.html#Q.compile_node"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Q.compile_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Compiles node into a cached function that performs the match.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">unary <code class="xref py py-class docutils literal"><span class="pre">collections.Callable</span></code> taking the object
to match.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="thorn.Q.compile_op">
<code class="descname">compile_op</code><span class="sig-paren">(</span><em>lhs</em>, <em>rhs</em>, <em>opcode</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/utils/functional.html#Q.compile_op"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Q.compile_op" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Q.gate">
<code class="descname">gate</code><a class="headerlink" href="#thorn.Q.gate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Q.gates">
<code class="descname">gates</code><em class="property"> = {u'AND': &lt;built-in function all&gt;, u'OR': &lt;built-in function any&gt;}</em><a class="headerlink" href="#thorn.Q.gates" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Q.operators">
<code class="descname">operators</code><em class="property"> = {u'gt': &lt;built-in function gt&gt;, u'is': &lt;built-in function is_&gt;, u'now_eq': &lt;function compare&gt;, u'now_endswith': &lt;function compare&gt;, u'endswith': &lt;function endswith&gt;, u'now_gt': &lt;function compare&gt;, u'in': &lt;function reversed&gt;, u'eq': &lt;built-in function eq&gt;, u'now_ne': &lt;function compare&gt;, u'gte': &lt;built-in function ge&gt;, u'contains': &lt;built-in function contains&gt;, u'ne': &lt;built-in function ne&gt;, u'lt': &lt;built-in function lt&gt;, u'now_not_in': &lt;function compare&gt;, u'startswith': &lt;function startswith&gt;, u'now_lt': &lt;function compare&gt;, u'now_lte': &lt;function compare&gt;, u'now_gte': &lt;function compare&gt;, u'not': &lt;function &lt;lambda&gt;&gt;, u'true': &lt;function &lt;lambda&gt;&gt;, u'not_in': &lt;function reversed&gt;, u'is_not': &lt;built-in function is_not&gt;, u'now_in': &lt;function compare&gt;, u'now_is': &lt;function compare&gt;, u'now_is_not': &lt;function compare&gt;, u'lte': &lt;built-in function le&gt;, u'now_contains': &lt;function compare&gt;, u'now_startswith': &lt;function compare&gt;}</em><a class="headerlink" href="#thorn.Q.operators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.Q.prepare_opcode">
<code class="descname">prepare_opcode</code><span class="sig-paren">(</span><em>O</em>, <em>rhs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/utils/functional.html#Q.prepare_opcode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Q.prepare_opcode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.Q.prepare_statement">
<code class="descname">prepare_statement</code><span class="sig-paren">(</span><em>lhs</em>, <em>rhs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/utils/functional.html#Q.prepare_statement"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Q.prepare_statement" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.Q.stack">
<code class="descname">stack</code><a class="reference internal" href="../_modules/thorn/utils/functional.html#Q.stack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.Q.stack" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="thorn.model_reverser">
<em class="property">class </em><code class="descclassname">thorn.</code><code class="descname">model_reverser</code><span class="sig-paren">(</span><em>view_name</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/reverse.html#model_reverser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.model_reverser" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes how to get the canonical URL for a model instance.</p>
<p><strong>Examples</strong></p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model_reverser</span><span class="p">(</span><span class="s1">&#39;article-detail&#39;</span><span class="p">,</span> <span class="n">uuid</span><span class="o">=</span><span class="s1">&#39;uuid&#39;</span><span class="p">)</span>
<span class="go"># for an article instance will generate the URL by calling:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;article_detail&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;uuid&#39;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">uuid</span><span class="p">})</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">model_reverser</span><span class="p">(</span><span class="s1">&#39;article-detail&#39;</span><span class="p">,</span> <span class="s1">&#39;category.name&#39;</span><span class="p">,</span> <span class="n">uuid</span><span class="o">=</span><span class="s1">&#39;uuid&#39;</span><span class="p">)</span>
<span class="go"># for an article instance will generate the URL by calling:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;article-detail&#39;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="n">name</span><span class="p">],</span>
<span class="gp">... </span>        <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;uuid&#39;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">uuid</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="thorn.webhook_model">
<em class="property">class </em><code class="descclassname">thorn.</code><code class="descname">webhook_model</code><span class="sig-paren">(</span><em>on_create=None</em>, <em>on_change=None</em>, <em>on_delete=None</em>, <em>reverse=None</em>, <em>sender_field=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/decorators.html#webhook_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.webhook_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorates models to send webhooks based changes to that model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>on_create</strong> &#8211; Event to dispatch whenever an instance of
this model is created (<code class="docutils literal"><span class="pre">post_save</span></code>).</li>
<li><strong>on_change</strong> &#8211; Event to dispatch whenever an instance of
this model is changed (<code class="docutils literal"><span class="pre">post_save</span></code>).</li>
<li><strong>on_delete</strong> &#8211; Event to dispatch whenever an instance of
this model is deleted (<code class="docutils literal"><span class="pre">post_delete</span></code>).</li>
<li><strong>on_$event</strong> &#8211; Additional user defined events.,</li>
<li><strong>sender_field</strong> &#8211; <p>Default field used as a sender for events, e.g. <code class="docutils literal"><span class="pre">&quot;account.user&quot;</span></code>,
will use <code class="docutils literal"><span class="pre">instance.account.user</span></code>.</p>
<p>Individual events can override the sender field user.</p>
</li>
<li><strong>reverse</strong> &#8211; <p>A <a class="reference internal" href="thorn.reverse.html#thorn.reverse.model_reverser" title="thorn.reverse.model_reverser"><code class="xref py py-class docutils literal"><span class="pre">thorn.reverse.model_reverser</span></code></a> instance (or any callable
taking an model instance as argument), that describes how to get
the URL for an instance of this model.</p>
<p>Individual events can override the reverser used.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong></p>
<p>Simple article model, where the URL reference is retrieved
by <code class="docutils literal"><span class="pre">reverse('article-detail',</span> <span class="pre">kwargs={'uuid':</span> <span class="pre">article.uuid})</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@webhook_model</span><span class="p">(</span>
    <span class="n">on_create</span><span class="o">=</span><span class="n">ModelEvent</span><span class="p">(</span><span class="s1">&#39;article.created&#39;</span><span class="p">),</span>
    <span class="n">on_change</span><span class="o">=</span><span class="n">ModelEvent</span><span class="p">(</span><span class="s1">&#39;article.changed&#39;</span><span class="p">),</span>
    <span class="n">on_delete</span><span class="o">=</span><span class="n">ModelEvent</span><span class="p">(</span><span class="s1">&#39;article.removed&#39;</span><span class="p">),</span>
    <span class="n">on_deactivate</span><span class="o">=</span><span class="n">ModelEvent</span><span class="p">(</span>
        <span class="s1">&#39;article.deactivate&#39;</span><span class="p">,</span> <span class="n">deactivated__eq</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">reverse</span><span class="o">=</span><span class="n">model_reverser</span><span class="p">(</span><span class="s1">&#39;article-detail&#39;</span><span class="p">,</span> <span class="n">uuid</span><span class="o">=</span><span class="s1">&#39;uuid&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">class</span> <span class="nc">Article</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">uuid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">UUIDField</span><span class="p">()</span>
</pre></div>
</div>
<p>The URL may not actually exist after deletion, so maybe we want
to point the reference to something else in that special case,
like a category that can be reversed by doing
<code class="docutils literal"><span class="pre">reverse('category-detail',</span> <span class="pre">args=[article.category.name])</span></code>.</p>
<p>We can do that by having the <code class="docutils literal"><span class="pre">on_delete</span></code> event override
the reverser used for that event only:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@webhook_model</span><span class="p">(</span>
    <span class="n">on_create</span><span class="o">=</span><span class="n">ModelEvent</span><span class="p">(</span><span class="s1">&#39;article.created&#39;</span><span class="p">),</span>
    <span class="n">on_change</span><span class="o">=</span><span class="n">ModelEvent</span><span class="p">(</span><span class="s1">&#39;article.changed&#39;</span><span class="p">),</span>
    <span class="n">on_delete</span><span class="o">=</span><span class="n">ModelEvent</span><span class="p">(</span>
        <span class="s1">&#39;article.removed&#39;</span><span class="p">,</span>
        <span class="n">reverse</span><span class="o">=</span><span class="n">model_reverser</span><span class="p">(</span><span class="s1">&#39;category-detail&#39;</span><span class="p">,</span> <span class="s1">&#39;category.name&#39;</span><span class="p">),</span>
    <span class="p">),</span>

    <span class="n">on_hipri_delete</span><span class="o">=</span><span class="n">ModelEvent</span><span class="p">(</span>
        <span class="s1">&#39;article.internal_delete&#39;</span><span class="p">,</span> <span class="n">priority__gte</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">dispatches_on_delete</span><span class="p">(),</span>

    <span class="n">reverse</span><span class="o">=</span><span class="n">model_reverser</span><span class="p">(</span><span class="s1">&#39;article-detail&#39;</span><span class="p">,</span> <span class="n">uuid</span><span class="o">=</span><span class="s1">&#39;uuid&#39;</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">class</span> <span class="nc">Article</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">uuid</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">UUIDField</span><span class="p">()</span>
    <span class="n">category</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="thorn.webhook_model.connect_events">
<code class="descname">connect_events</code><span class="sig-paren">(</span><em>events</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/decorators.html#webhook_model.connect_events"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.webhook_model.connect_events" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.webhook_model.contribute_to_event">
<code class="descname">contribute_to_event</code><span class="sig-paren">(</span><em>event</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/decorators.html#webhook_model.contribute_to_event"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.webhook_model.contribute_to_event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="thorn.webhook_model.data">
<code class="descname">data</code><a class="headerlink" href="#thorn.webhook_model.data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="thorn.webhook_model.update_events">
<code class="descname">update_events</code><span class="sig-paren">(</span><em>events</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/thorn/decorators.html#webhook_model.update_events"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#thorn.webhook_model.update_events" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p><script async defer src="https://buttons.github.io/buttons.js"></script>
<a class="github-button" href="https://github.com/robinhood/thorn" data-icon="octicon-star" data-style="mega" data-count-href="/robinhood/thorn/stargazers" data-count-api="/repos/robinhood/thorn#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star Thorn on GitHub">Star</a>
<a class="github-button" href="https://github.com/robinhood/thorn/issues" data-icon="octicon-issue-opened" data-style="mega" data-count-api="/repos/robinhood/thorn#open_issues_count" data-count-aria-label="# issues on GitHub" aria-label="Issue robinhood/thorn on GitHub">Issue</a>
  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">API Reference</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="thorn.app.html"
                        title="next chapter">thorn.app</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/thorn.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="thorn.app.html" title="thorn.app"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="API Reference"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Thorn 1.3.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >API Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; <a href="../copyright.html">Copyright</a> 2016, Robinhood Markets.
    </div>
  </body>
</html>