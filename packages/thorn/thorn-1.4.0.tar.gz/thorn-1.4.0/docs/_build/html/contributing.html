<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Contributing &mdash; Thorn 1.3.0 documentation</title>
    
    <link rel="stylesheet" href="_static/thorn.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="top" title="Thorn 1.3.0 documentation" href="index.html" />
    <link rel="next" title="Glossary" href="glossary.html" />
    <link rel="prev" title="Changelog" href="changelog.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="glossary.html" title="Glossary"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Thorn 1.3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="contributing">
<span id="id1"></span><h1>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h1>
<p>Welcome!</p>
<p>This document is fairly extensive and you are not really expected
to study this in detail for small contributions;</p>
<blockquote>
<div>The most important rule is that contributing must be easy
and that the community is friendly and not nitpicking on details
such as coding style.</div></blockquote>
<p>If you&#8217;re reporting a bug you should read the Reporting bugs section
below to ensure that your bug report contains enough information
to successfully diagnose the issue, and if you&#8217;re contributing code
you should try to mimic the conventions you see surrounding the code
you are working on, but in the end all patches will be cleaned up by
the person merging the changes so don&#8217;t worry too much.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#community-code-of-conduct" id="id9">Community Code of Conduct</a><ul>
<li><a class="reference internal" href="#be-considerate" id="id10">Be considerate.</a></li>
<li><a class="reference internal" href="#be-respectful" id="id11">Be respectful.</a></li>
<li><a class="reference internal" href="#be-collaborative" id="id12">Be collaborative.</a></li>
<li><a class="reference internal" href="#when-you-disagree-consult-others" id="id13">When you disagree, consult others.</a></li>
<li><a class="reference internal" href="#when-you-are-unsure-ask-for-help" id="id14">When you are unsure, ask for help.</a></li>
<li><a class="reference internal" href="#step-down-considerately" id="id15">Step down considerately.</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reporting-bugs" id="id16">Reporting Bugs</a><ul>
<li><a class="reference internal" href="#security" id="id17">Security</a></li>
<li><a class="reference internal" href="#other-bugs" id="id18">Other bugs</a></li>
<li><a class="reference internal" href="#issue-tracker" id="id19">Issue Tracker</a></li>
</ul>
</li>
<li><a class="reference internal" href="#versions" id="id20">Versions</a></li>
<li><a class="reference internal" href="#branches" id="id21">Branches</a><ul>
<li><a class="reference internal" href="#master-branch" id="id22"><code class="docutils literal"><span class="pre">master</span></code> branch</a></li>
<li><a class="reference internal" href="#maintenance-branches" id="id23">Maintenance branches</a></li>
<li><a class="reference internal" href="#archived-branches" id="id24">Archived branches</a></li>
<li><a class="reference internal" href="#feature-branches" id="id25">Feature branches</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tags" id="id26">Tags</a></li>
<li><a class="reference internal" href="#working-on-features-patches" id="id27">Working on Features &amp; Patches</a><ul>
<li><a class="reference internal" href="#forking-and-setting-up-the-repository" id="id28">Forking and setting up the repository</a></li>
<li><a class="reference internal" href="#running-the-unit-test-suite" id="id29">Running the unit test suite</a></li>
<li><a class="reference internal" href="#running-the-functional-test-suite" id="id30">Running the functional test suite</a></li>
<li><a class="reference internal" href="#creating-pull-requests" id="id31">Creating pull requests</a><ul>
<li><a class="reference internal" href="#calculating-test-coverage" id="id32">Calculating test coverage</a></li>
<li><a class="reference internal" href="#running-the-tests-on-all-supported-python-versions" id="id33">Running the tests on all supported Python versions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#building-the-documentation" id="id34">Building the documentation</a></li>
<li><a class="reference internal" href="#verifying-your-contribution" id="id35">Verifying your contribution</a><ul>
<li><a class="reference internal" href="#pyflakes-pep8" id="id36">pyflakes &amp; PEP8</a></li>
<li><a class="reference internal" href="#api-reference" id="id37">API reference</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#coding-style" id="id38">Coding Style</a></li>
<li><a class="reference internal" href="#contributing-features-requiring-additional-libraries" id="id39">Contributing features requiring additional libraries</a></li>
<li><a class="reference internal" href="#contacts" id="id40">Contacts</a><ul>
<li><a class="reference internal" href="#committers" id="id41">Committers</a><ul>
<li><a class="reference internal" href="#ask-solem" id="id42">Ask Solem</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#packages" id="id43">Packages</a><ul>
<li><a class="reference internal" href="#thorn" id="id44"><code class="docutils literal"><span class="pre">thorn</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#release-procedure" id="id45">Release Procedure</a><ul>
<li><a class="reference internal" href="#updating-the-version-number" id="id46">Updating the version number</a></li>
<li><a class="reference internal" href="#releasing" id="id47">Releasing</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="community-code-of-conduct">
<span id="id2"></span><h2><a class="toc-backref" href="#id9">Community Code of Conduct</a><a class="headerlink" href="#community-code-of-conduct" title="Permalink to this headline">¶</a></h2>
<p>The goal is to maintain a diverse community that is pleasant for everyone.
That is why we would greatly appreciate it if everyone contributing to and
interacting with the community also followed this Code of Conduct.</p>
<p>The Code of Conduct covers our behavior as members of the community,
in any forum, mailing list, wiki, website, Internet relay chat (IRC), public
meeting or private correspondence.</p>
<p>The Code of Conduct is heavily based on the <a class="reference external" href="http://www.ubuntu.com/community/conduct">Ubuntu Code of Conduct</a>, and
the <a class="reference external" href="http://docs.pylonshq.com/community/conduct.html">Pylons Code of Conduct</a>.</p>
<div class="section" id="be-considerate">
<h3><a class="toc-backref" href="#id10">Be considerate.</a><a class="headerlink" href="#be-considerate" title="Permalink to this headline">¶</a></h3>
<p>Your work will be used by other people, and you in turn will depend on the
work of others.  Any decision you take will affect users and colleagues, and
we expect you to take those consequences into account when making decisions.
Even if it&#8217;s not obvious at the time, our contributions to Thorn will impact
the work of others.  For example, changes to code, infrastructure, policy,
documentation and translations during a release may negatively impact
others work.</p>
</div>
<div class="section" id="be-respectful">
<h3><a class="toc-backref" href="#id11">Be respectful.</a><a class="headerlink" href="#be-respectful" title="Permalink to this headline">¶</a></h3>
<p>The Thorn community and its members treat one another with respect.  Everyone
can make a valuable contribution to Thorn.  We may not always agree, but
disagreement is no excuse for poor behavior and poor manners.  We might all
experience some frustration now and then, but we cannot allow that frustration
to turn into a personal attack.  It&#8217;s important to remember that a community
where people feel uncomfortable or threatened is not a productive one.  We
expect members of the Thorn community to be respectful when dealing with
other contributors as well as with people outside the Thorn project and with
users of Thorn.</p>
</div>
<div class="section" id="be-collaborative">
<h3><a class="toc-backref" href="#id12">Be collaborative.</a><a class="headerlink" href="#be-collaborative" title="Permalink to this headline">¶</a></h3>
<p>Collaboration is central to Thorn and to the larger free software community.
We should always be open to collaboration.  Your work should be done
transparently and patches from Thorn should be given back to the community
when they are made, not just when the distribution releases.  If you wish
to work on new code for existing upstream projects, at least keep those
projects informed of your ideas and progress.  It many not be possible to
get consensus from upstream, or even from your colleagues about the correct
implementation for an idea, so don&#8217;t feel obliged to have that agreement
before you begin, but at least keep the outside world informed of your work,
and publish your work in a way that allows outsiders to test, discuss and
contribute to your efforts.</p>
</div>
<div class="section" id="when-you-disagree-consult-others">
<h3><a class="toc-backref" href="#id13">When you disagree, consult others.</a><a class="headerlink" href="#when-you-disagree-consult-others" title="Permalink to this headline">¶</a></h3>
<p>Disagreements, both political and technical, happen all the time and
the Thorn community is no exception.  It is important that we resolve
disagreements and differing views constructively and with the help of the
community and community process.  If you really want to go a different
way, then we encourage you to make a derivative distribution or alternate
set of packages that still build on the work we&#8217;ve done to utilize as common
of a core as possible.</p>
</div>
<div class="section" id="when-you-are-unsure-ask-for-help">
<h3><a class="toc-backref" href="#id14">When you are unsure, ask for help.</a><a class="headerlink" href="#when-you-are-unsure-ask-for-help" title="Permalink to this headline">¶</a></h3>
<p>Nobody knows everything, and nobody is expected to be perfect.  Asking
questions avoids many problems down the road, and so questions are
encouraged.  Those who are asked questions should be responsive and helpful.
However, when asking a question, care must be taken to do so in an appropriate
forum.</p>
</div>
<div class="section" id="step-down-considerately">
<h3><a class="toc-backref" href="#id15">Step down considerately.</a><a class="headerlink" href="#step-down-considerately" title="Permalink to this headline">¶</a></h3>
<p>Developers on every project come and go and Thorn is no different.  When you
leave or disengage from the project, in whole or in part, we ask that you do
so in a way that minimizes disruption to the project.  This means you should
tell people you are leaving and take the proper steps to ensure that others
can pick up where you leave off.</p>
</div>
</div>
<div class="section" id="reporting-bugs">
<span id="id3"></span><h2><a class="toc-backref" href="#id16">Reporting Bugs</a><a class="headerlink" href="#reporting-bugs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="security">
<span id="vulnsec"></span><h3><a class="toc-backref" href="#id17">Security</a><a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h3>
<p>You must never report security related issues, vulnerabilities or bugs
including sensitive information to the bug tracker, or elsewhere in public.
Instead sensitive bugs must be sent by email to <code class="docutils literal"><span class="pre">security&#64;robinhood.com</span></code>.</p>
<p>If you&#8217;d like to submit the information encrypted our PGP key is:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="o">-----</span><span class="n">BEGIN</span> <span class="n">PGP</span> <span class="n">PUBLIC</span> <span class="n">KEY</span> <span class="n">BLOCK</span><span class="o">-----</span>
<span class="n">Version</span><span class="p">:</span> <span class="n">GnuPG</span> <span class="n">v1</span><span class="o">.</span><span class="mf">4.15</span> <span class="p">(</span><span class="n">Darwin</span><span class="p">)</span>

<span class="n">mQENBFJpWDkBCADFIc9</span><span class="o">/</span><span class="n">Fpgse4owLNvsTC7GYfnJL19XO0hnL99sPx</span><span class="o">+</span><span class="n">DPbfr</span><span class="o">+</span><span class="n">cSE</span>
<span class="mi">9</span><span class="n">wiU</span><span class="o">+</span><span class="n">Wp2TfUX7pCLEGrODiEP6ZCZbgtiPgId</span><span class="o">+</span><span class="n">JYvMxpP6GXbjiIlHRw1EQNH8RlX</span>
<span class="n">cVxy3rQfVv8PGGiJuyBBjxzvETHW25htVAZ5TI1</span><span class="o">+</span><span class="n">CkxmuyyEYqgZN2fNd0wEU19D</span>
<span class="o">+</span><span class="n">c10G1gSECbCQTCbacLSzdpngAt1Gkrc96r7wGHBBSvDaGDD2pFSkVuTLMbIRrVp</span>
<span class="n">lnKOPMsUijiip2EMr2DvfuXiUIUvaqInTPNWkDynLoh69ib5xC19CSVLONjkKBsr</span>
<span class="n">Pe</span><span class="o">+</span><span class="n">qAY29liBatatpXsydY7GIUzyBT3MzgMJlABEBAAG0MUNlbGVyeSBTZWN1cml0</span>
<span class="n">eSBUZWFtIDxzZWN1cml0eUBjZWxlcnlwcm9qZWN0Lm9yZz6JATgEEwECACIFAlJp</span>
<span class="n">WDkCGwMGCwkIBwMCBhUIAgkKCwQWAgMBAh4BAheAAAoJEOArFOUDCicIw1IH</span><span class="o">/</span><span class="mi">26</span><span class="n">f</span>
<span class="n">CViDC7</span><span class="o">/</span><span class="n">P13jr</span><span class="o">+</span><span class="n">srRdjAsWvQztia9HmTlY8cUnbmkR9w6b6j3F2ayw8VhkyFWgYEJ</span>
<span class="n">wtPBv8mHKADiVSFARS</span><span class="o">+</span><span class="mi">0</span><span class="n">yGsfCkia5wDSQuIv6XqRlIrXUyqJbmF4NUFTyCZYoh</span><span class="o">+</span><span class="n">C</span>
<span class="n">ZiQpN9xGhFPr5QDlMx2izWg1rvWlG1jY2Es1v</span><span class="o">/</span><span class="n">xED3AeCOB1eUGvRe</span><span class="o">/</span><span class="n">uJHKjGv7J</span>
<span class="n">rj0pFcptZX</span><span class="o">+</span><span class="n">WDF22AN235WYwgJM6TrNfSu8sv8vNAQOVnsKcgsqhuwomSGsOfMQj</span>
<span class="n">LFzIn95MKBBU1G5wOs7JtwiV9jefGqJGBO2FAvOVbvPdK</span><span class="o">/</span><span class="n">saSnB</span><span class="o">+</span><span class="mi">7</span><span class="n">K36dQcIHqms</span>
<span class="mi">5</span><span class="n">hU4Xj0RIJiod5idlRC5AQ0EUmlYOQEIAJs8OwHMkrdcvy9kk2HBVbdqhgAREMKy</span>
<span class="n">gmphDp7prRL9FqSY</span><span class="o">/</span><span class="n">dKpCbG0u82zyJypdb7QiaQ5pfPzPpQcd2dIcohkkh7G3E</span><span class="o">+</span><span class="n">e</span>
<span class="n">hS2L9AXHpwR26</span><span class="o">/</span><span class="n">PzMBXyr2iNnNc4vTksHvGVDxzFnRpka6vbI</span><span class="o">/</span><span class="n">hrrZmYNYh9EAiv</span>
<span class="n">uhE54b3</span><span class="o">/</span><span class="n">XhXwFgHjZXb9i8hgJ3nsO0pRwvUAM1bRGMbvf8e9F</span><span class="o">+</span><span class="n">kqgV0yWYNnh6QL</span>
<span class="mi">4</span><span class="n">Vpl1</span><span class="o">+</span><span class="n">epqp2RKPHyNQftbQyrAHXT9kQF9pPlx013MKYaFTADscuAp4T3dy7xmiwS</span>
<span class="n">crqMbZLzfrxfFOsNxTUGE5vmJCcm</span><span class="o">+</span><span class="n">mybAtRo4aV6ACohAO9NevMx8pUAEQEAAYkB</span>
<span class="n">HwQYAQIACQUCUmlYOQIbDAAKCRDgKxTlAwonCNFbB</span><span class="o">/</span><span class="mi">9</span><span class="n">esir</span><span class="o">/</span><span class="n">f7TufE</span><span class="o">+</span><span class="n">isNqErzR</span><span class="o">/</span>
<span class="n">aZKZo2WzZR9c75kbqo6J6DYuUHe6xI0OZ2qZ60iABDEZAiNXGulysFLCiPdatQ8x</span>
<span class="mi">8</span><span class="n">zt3DF9BMkEck54ZvAjpNSern6zfZb1jPYWZq3TKxlTs</span><span class="o">/</span><span class="n">GuCgBAuV4i5vDTZ7xK</span><span class="o">/</span>
<span class="n">aF</span><span class="o">+</span><span class="n">OFY5zN7ciZHkqLgMiTZ</span><span class="o">+</span><span class="n">RhqRcK6FhVBP</span><span class="o">/</span><span class="n">Y7d9NlBOcDBTxxE1ZO1ute6n7guJ</span>
<span class="n">ciw4hfoRk8qNN19szZuq3UU64zpkM2sBsIFM9tGF2FADRxiOaOWZHmIyVZriPFqW</span>
<span class="n">RUwjSjs7jBVNq0Vy4fCu</span><span class="o">/</span><span class="mi">5</span><span class="o">+</span><span class="n">e</span><span class="o">+</span><span class="n">XLOUBOoqtM5W7ELt0t1w9tXebtPEetV86in8fU2</span>
<span class="o">=</span><span class="mi">0</span><span class="n">chn</span>
<span class="o">-----</span><span class="n">END</span> <span class="n">PGP</span> <span class="n">PUBLIC</span> <span class="n">KEY</span> <span class="n">BLOCK</span><span class="o">-----</span>
</pre></div>
</div>
</div>
<div class="section" id="other-bugs">
<h3><a class="toc-backref" href="#id18">Other bugs</a><a class="headerlink" href="#other-bugs" title="Permalink to this headline">¶</a></h3>
<p>Bugs can always be described to the <a class="reference internal" href="introduction.html#mailing-list"><span class="std std-ref">Mailing list</span></a>, but the best
way to report an issue and to ensure a timely response is to use the
issue tracker.</p>
<ol class="arabic simple">
<li><strong>Create a GitHub account.</strong></li>
</ol>
<p>You need to <a class="reference external" href="https://github.com/signup/free">create a GitHub account</a> to be able to create new issues
and participate in the discussion.</p>
<ol class="arabic simple" start="2">
<li><strong>Determine if your bug is really a bug.</strong></li>
</ol>
<p>You should not file a bug if you are requesting support.  For that you can use
the <a class="reference internal" href="introduction.html#mailing-list"><span class="std std-ref">Mailing list</span></a>, or <a class="reference internal" href="introduction.html#irc-channel"><span class="std std-ref">IRC</span></a>.</p>
<ol class="arabic simple" start="3">
<li><strong>Make sure your bug hasn&#8217;t already been reported.</strong></li>
</ol>
<p>Search through the appropriate Issue tracker.  If a bug like yours was found,
check if you have new information that could be reported to help
the developers fix the bug.</p>
<ol class="arabic simple" start="4">
<li><strong>Check if you&#8217;re using the latest version.</strong></li>
</ol>
<p>A bug could be fixed by some other improvements and fixes - it might not have an
existing report in the bug tracker. Make sure you&#8217;re using the latest release of
Thorn, and try the development version to see if the issue is already fixed
and pending release.</p>
<ol class="arabic simple" start="5">
<li><strong>Collect information about the bug.</strong></li>
</ol>
<p>To have the best chance of having a bug fixed, we need to be able to easily
reproduce the conditions that caused it.  Most of the time this information
will be from a Python traceback message, though some bugs might be in design,
spelling or other errors on the website/docs/code.</p>
<blockquote>
<div><ol class="upperalpha simple">
<li>If the error is from a Python traceback, include it in the bug report.</li>
<li>We also need to know what platform you&#8217;re running (Windows, macOS, Linux,
etc.), the version of your Python interpreter, and the version of Thorn,
and related packages that you were running when the bug occurred.</li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="6">
<li><strong>Submit the bug.</strong></li>
</ol>
<p>By default <a class="reference external" href="https://github.com">GitHub</a> will email you to let you know when new comments have
been made on your bug. In the event you&#8217;ve turned this feature off, you
should check back on occasion to ensure you don&#8217;t miss any questions a
developer trying to fix the bug might ask.</p>
</div>
<div class="section" id="issue-tracker">
<span id="id4"></span><h3><a class="toc-backref" href="#id19">Issue Tracker</a><a class="headerlink" href="#issue-tracker" title="Permalink to this headline">¶</a></h3>
<p>The Thorn issue tracker can be found at GitHub:
<a class="reference external" href="https://github.com/robinhood/thorn">https://github.com/robinhood/thorn</a></p>
</div>
</div>
<div class="section" id="versions">
<span id="id5"></span><h2><a class="toc-backref" href="#id20">Versions</a><a class="headerlink" href="#versions" title="Permalink to this headline">¶</a></h2>
<p>Version numbers consists of a major version, minor version and a release number,
and conforms to the SemVer versioning spec: <a class="reference external" href="http://semver.org">http://semver.org</a>.</p>
<p>Stable releases are published at PyPI
while development releases are only available in the GitHub git repository as tags.
All version tags starts with “v”, so version 0.8.0 is the tag v0.8.0.</p>
</div>
<div class="section" id="branches">
<span id="git-branches"></span><h2><a class="toc-backref" href="#id21">Branches</a><a class="headerlink" href="#branches" title="Permalink to this headline">¶</a></h2>
<p>Current active version branches:</p>
<ul class="simple">
<li>master (<a class="reference external" href="https://github.com/robinhood/thorn/tree/master">https://github.com/robinhood/thorn/tree/master</a>)</li>
</ul>
<p>You can see the state of any branch by looking at the Changelog:</p>
<blockquote>
<div><a class="reference external" href="https://github.com/robinhood/thorn/blob/master/Changelog">https://github.com/robinhood/thorn/blob/master/Changelog</a></div></blockquote>
<p>If the branch is in active development the topmost version info should
contain meta-data like:</p>
<div class="highlight-restructuredtext"><div class="highlight"><pre><span></span><span class="gh">2.4.0</span>
<span class="gh">======</span>
<span class="nc">:release-date:</span> <span class="nf">TBA</span>
<span class="nc">:status:</span> <span class="nf">DEVELOPMENT</span>
<span class="nc">:branch:</span> <span class="nf">master</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">status</span></code> field can be one of:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">PLANNING</span></code></p>
<blockquote>
<div><p>The branch is currently experimental and in the planning stage.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">DEVELOPMENT</span></code></p>
<blockquote>
<div><p>The branch is in active development, but the test suite should
be passing and the product should be working and possible for users to test.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">FROZEN</span></code></p>
<blockquote>
<div><p>The branch is frozen, and no more features will be accepted.
When a branch is frozen the focus is on testing the version as much
as possible before it is released.</p>
</div></blockquote>
</li>
</ul>
<div class="section" id="master-branch">
<h3><a class="toc-backref" href="#id22"><code class="docutils literal"><span class="pre">master</span></code> branch</a><a class="headerlink" href="#master-branch" title="Permalink to this headline">¶</a></h3>
<p>The master branch is where development of the next version happens.</p>
</div>
<div class="section" id="maintenance-branches">
<h3><a class="toc-backref" href="#id23">Maintenance branches</a><a class="headerlink" href="#maintenance-branches" title="Permalink to this headline">¶</a></h3>
<p>Maintenance branches are named after the version, e.g. the maintenance branch
for the 2.2.x series is named <code class="docutils literal"><span class="pre">2.2</span></code>.  Previously these were named
<code class="docutils literal"><span class="pre">releaseXX-maint</span></code>.</p>
<p>The versions we currently maintain is:</p>
<ul>
<li><p class="first">1.0</p>
<p>This is the current series.</p>
</li>
</ul>
</div>
<div class="section" id="archived-branches">
<h3><a class="toc-backref" href="#id24">Archived branches</a><a class="headerlink" href="#archived-branches" title="Permalink to this headline">¶</a></h3>
<p>Archived branches are kept for preserving history only,
and theoretically someone could provide patches for these if they depend
on a series that is no longer officially supported.</p>
<p>An archived version is named <code class="docutils literal"><span class="pre">X.Y-archived</span></code>.</p>
<p>Thorn does not currently have any archived branches.</p>
</div>
<div class="section" id="feature-branches">
<h3><a class="toc-backref" href="#id25">Feature branches</a><a class="headerlink" href="#feature-branches" title="Permalink to this headline">¶</a></h3>
<p>Major new features are worked on in dedicated branches.
There is no strict naming requirement for these branches.</p>
<p>Feature branches are removed once they have been merged into a release branch.</p>
</div>
</div>
<div class="section" id="tags">
<h2><a class="toc-backref" href="#id26">Tags</a><a class="headerlink" href="#tags" title="Permalink to this headline">¶</a></h2>
<p>Tags are used exclusively for tagging releases.  A release tag is
named with the format <code class="docutils literal"><span class="pre">vX.Y.Z</span></code>, e.g. <code class="docutils literal"><span class="pre">v2.3.1</span></code>.
Experimental releases contain an additional identifier <code class="docutils literal"><span class="pre">vX.Y.Z-id</span></code>, e.g.
<code class="docutils literal"><span class="pre">v3.0.0-rc1</span></code>.  Experimental tags may be removed after the official release.</p>
</div>
<div class="section" id="working-on-features-patches">
<span id="contributing-changes"></span><h2><a class="toc-backref" href="#id27">Working on Features &amp; Patches</a><a class="headerlink" href="#working-on-features-patches" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Contributing to Thorn should be as simple as possible,
so none of these steps should be considered mandatory.</p>
<p>You can even send in patches by email if that is your preferred
work method. We won&#8217;t like you any less, any contribution you make
is always appreciated!</p>
<p class="last">However following these steps may make maintainers life easier,
and may mean that your changes will be accepted sooner.</p>
</div>
<div class="section" id="forking-and-setting-up-the-repository">
<h3><a class="toc-backref" href="#id28">Forking and setting up the repository</a><a class="headerlink" href="#forking-and-setting-up-the-repository" title="Permalink to this headline">¶</a></h3>
<p>First you need to fork the Thorn repository, a good introduction to this
is in the GitHub Guide: <a class="reference external" href="http://help.github.com/fork-a-repo/">Fork a Repo</a>.</p>
<p>After you have cloned the repository you should checkout your copy
to a directory on your machine:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> git clone git@github.com:username/thorn.git
</pre></div>
</div>
<p>When the repository is cloned enter the directory to set up easy access
to upstream changes:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> thorn
<span class="gp">$</span> git remote add upstream git://github.com/robinhood/thorn.git
<span class="gp">$</span> git fetch upstream
</pre></div>
</div>
<p>If you need to pull in new changes from upstream you should
always use the <code class="docutils literal"><span class="pre">--rebase</span></code> option to <code class="docutils literal"><span class="pre">git</span> <span class="pre">pull</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">git pull --rebase upstream master</span>
</pre></div>
</div>
<p>With this option you don&#8217;t clutter the history with merging
commit notes. See <a class="reference external" href="http://notes.envato.com/developers/rebasing-merge-commits-in-git/">Rebasing merge commits in git</a>.
If you want to learn more about rebasing see the <a class="reference external" href="http://help.github.com/rebase/">Rebase</a>
section in the GitHub guides.</p>
<p>If you need to work on a different branch than <code class="docutils literal"><span class="pre">master</span></code> you can
fetch and checkout a remote branch like this:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="o">--</span><span class="n">track</span> <span class="o">-</span><span class="n">b</span> <span class="mf">3.0</span><span class="o">-</span><span class="n">devel</span> <span class="n">origin</span><span class="o">/</span><span class="mf">3.0</span><span class="o">-</span><span class="n">devel</span>
</pre></div>
</div>
</div>
<div class="section" id="running-the-unit-test-suite">
<span id="contributing-testing"></span><h3><a class="toc-backref" href="#id29">Running the unit test suite</a><a class="headerlink" href="#running-the-unit-test-suite" title="Permalink to this headline">¶</a></h3>
<p>To run the Thorn test suite you need to install a few dependencies.
A complete list of the dependencies needed are located in
<code class="file docutils literal"><span class="pre">requirements/test.txt</span></code>.</p>
<p>If you&#8217;re working on the development version, then you need to
install the development requirements first:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install -U -r requirements/dev.txt
</pre></div>
</div>
<p>Both the stable and the development version have testing related
dependencies, so install these next:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install -U -r requirements/test.txt
<span class="gp">$</span> pip install -U -r requirements/default.txt
</pre></div>
</div>
<p>After installing the dependencies required, you can now execute
the test suite by calling:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> python setup.py <span class="nb">test</span>
</pre></div>
</div>
<p>This will run all of the test, to run individual tests you need
to working in the test project directory:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> python testproj/manage.py <span class="nb">test</span>
</pre></div>
</div>
<p>Some useful options to <strong class="command">manage.py test</strong> are:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">-x</span></code></p>
<blockquote>
<div><p>Stop running the tests at the first test that fails.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">-s</span></code></p>
<blockquote>
<div><p>Don&#8217;t capture output</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">-nologcapture</span></code></p>
<blockquote>
<div><p>Don&#8217;t capture log output.</p>
</div></blockquote>
</li>
</ul>
<p>If you want to run the tests for a single test file only
you can do so like this:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> python testproj/manage.py <span class="nb">test</span> thorn.tests.test_request
</pre></div>
</div>
</div>
<div class="section" id="running-the-functional-test-suite">
<h3><a class="toc-backref" href="#id30">Running the functional test suite</a><a class="headerlink" href="#running-the-functional-test-suite" title="Permalink to this headline">¶</a></h3>
<p>Thorn uses <a class="reference external" href="https://pypi.python.org/pypi/cyanide/">cyanide</a> for functional/integration tests,
but note that this requires a working Celery installation.</p>
<ol class="arabic">
<li><p class="first">Start the celery worker:</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> celery -A thorn.funtests worker -l info -P eventlet -c 1000
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Start the development web server:</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="o">(</span><span class="nb">cd</span> testproj<span class="p">;</span> python manage.py runserver<span class="o">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Then execute the functional test suite:</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> celery -A thorn.funtests cyanide
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>For a list of tests that you can select see:</p>
<blockquote>
<div><div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> celery -A thorn.funtests cyanide -l
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="creating-pull-requests">
<span id="contributing-pull-requests"></span><h3><a class="toc-backref" href="#id31">Creating pull requests</a><a class="headerlink" href="#creating-pull-requests" title="Permalink to this headline">¶</a></h3>
<p>When your feature/bugfix is complete you may want to submit
a pull requests so that it can be reviewed by the maintainers.</p>
<p>Creating pull requests is easy, and also let you track the progress
of your contribution.  Read the <a class="reference external" href="http://help.github.com/send-pull-requests/">Pull Requests</a> section in the GitHub
Guide to learn how this is done.</p>
<p>You can also attach pull requests to existing issues by following
the steps outlined here: <a class="reference external" href="http://bit.ly/koJoso">http://bit.ly/koJoso</a></p>
<div class="section" id="calculating-test-coverage">
<span id="contributing-coverage"></span><h4><a class="toc-backref" href="#id32">Calculating test coverage</a><a class="headerlink" href="#calculating-test-coverage" title="Permalink to this headline">¶</a></h4>
<p>To calculate test coverage you must first install the <a class="reference external" href="https://pypi.python.org/pypi/coverage/">coverage</a> module.</p>
<p>Installing the <a class="reference external" href="https://pypi.python.org/pypi/coverage/">coverage</a> module:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install -U coverage
</pre></div>
</div>
<p>Code coverage in HTML:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> make cov
</pre></div>
</div>
<p>The coverage output will then be located at
<code class="file docutils literal"><span class="pre">cover/index.html</span></code>.</p>
</div>
<div class="section" id="running-the-tests-on-all-supported-python-versions">
<span id="contributing-tox"></span><h4><a class="toc-backref" href="#id33">Running the tests on all supported Python versions</a><a class="headerlink" href="#running-the-tests-on-all-supported-python-versions" title="Permalink to this headline">¶</a></h4>
<p>There is a <a class="reference external" href="https://pypi.python.org/pypi/tox/">tox</a> configuration file in the top directory of the
distribution.</p>
<p>To run the tests for all supported Python versions simply execute:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> tox
</pre></div>
</div>
<p>Use the <code class="docutils literal"><span class="pre">tox</span> <span class="pre">-e</span></code> option if you only want to test specific Python versions:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> tox -e 2.7
</pre></div>
</div>
</div>
</div>
<div class="section" id="building-the-documentation">
<h3><a class="toc-backref" href="#id34">Building the documentation</a><a class="headerlink" href="#building-the-documentation" title="Permalink to this headline">¶</a></h3>
<p>To build the documentation you need to install the dependencies
listed in <code class="file docutils literal"><span class="pre">requirements/docs.txt</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install -U -r requirements/docs.txt
</pre></div>
</div>
<p>After these dependencies are installed you should be able to
build the docs by running:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> docs
<span class="gp">$</span> rm -rf _build
<span class="gp">$</span> make html
</pre></div>
</div>
<p>Make sure there are no errors or warnings in the build output.
After building succeeds the documentation is available at <code class="file docutils literal"><span class="pre">_build/html</span></code>.</p>
</div>
<div class="section" id="verifying-your-contribution">
<span id="contributing-verify"></span><h3><a class="toc-backref" href="#id35">Verifying your contribution</a><a class="headerlink" href="#verifying-your-contribution" title="Permalink to this headline">¶</a></h3>
<p>To use these tools you need to install a few dependencies.  These dependencies
can be found in <code class="file docutils literal"><span class="pre">requirements/pkgutils.txt</span></code>.</p>
<p>Installing the dependencies:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install -U -r requirements/pkgutils.txt
</pre></div>
</div>
<div class="section" id="pyflakes-pep8">
<h4><a class="toc-backref" href="#id36">pyflakes &amp; PEP8</a><a class="headerlink" href="#pyflakes-pep8" title="Permalink to this headline">¶</a></h4>
<p>To ensure that your changes conform to PEP8 and to run pyflakes
execute:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> make flakecheck
</pre></div>
</div>
<p>To not return a negative exit code when this command fails use
the <code class="docutils literal"><span class="pre">flakes</span></code> target instead:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> make flakes
</pre></div>
</div>
</div>
<div class="section" id="api-reference">
<h4><a class="toc-backref" href="#id37">API reference</a><a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h4>
<p>To make sure that all modules have a corresponding section in the API
reference please execute:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> make apicheck
<span class="gp">$</span> make configcheck
</pre></div>
</div>
<p>If files are missing you can add them by copying an existing reference file.</p>
<p>If the module is internal it should be part of the internal reference
located in <code class="file docutils literal"><span class="pre">docs/internals/reference/</span></code>.  If the module is public
it should be located in <code class="file docutils literal"><span class="pre">docs/reference/</span></code>.</p>
<p>For example if reference is missing for the module <code class="docutils literal"><span class="pre">thorn.awesome</span></code>
and this module is considered part of the public API, use the following steps:</p>
<p>Use an existing file as a template:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> docs/reference/
<span class="gp">$</span> cp thorn.request.rst thron.awesome.rst
</pre></div>
</div>
<p>Edit the file using your favorite editor:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> vim thorn.awesome.rst

<span class="gp">    #</span> change every occurrence of <span class="sb">``</span>thorn.request<span class="sb">``</span> to
<span class="gp">    #</span> <span class="sb">``</span>thorn.awesome<span class="sb">``</span>
</pre></div>
</div>
<p>Edit the index using your favorite editor:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> vim index.rst

<span class="gp">    #</span> Add <span class="sb">``</span>thorn.awesome<span class="sb">``</span> to the index.
</pre></div>
</div>
<p>Commit your changes:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> Add the file to git
<span class="gp">$</span> git add thorn.awesome.rst
<span class="gp">$</span> git add index.rst
<span class="gp">$</span> git commit thorn.awesome.rst index.rst <span class="se">\</span>
<span class="go">    -m &quot;Adds reference for thorn.awesome&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="coding-style">
<span id="id6"></span><h2><a class="toc-backref" href="#id38">Coding Style</a><a class="headerlink" href="#coding-style" title="Permalink to this headline">¶</a></h2>
<p>You should probably be able to pick up the coding style
from surrounding code, but it is a good idea to be aware of the
following conventions.</p>
<ul class="simple">
<li>All Python code must follow the <a class="reference external" href="http://www.python.org/dev/peps/pep-0008/">PEP-8</a> guidelines.</li>
</ul>
<p><a class="reference external" href="http://pypi.python.org/pypi/pep8">pep8.py</a> is an utility you can use to verify that your code
is following the conventions.</p>
<ul>
<li><p class="first">Docstrings must follow the <a class="reference external" href="http://www.python.org/dev/peps/pep-0257/">PEP-257</a> conventions, and use the following
style.</p>
<blockquote>
<div><p>Do this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Short description.</span>

<span class="sd">    More details.</span>

<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Short description.&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>but not this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Short description.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<ul>
<li><p class="first">Lines should not exceed 78 columns.</p>
<p>You can enforce this in <strong class="command">vim</strong> by setting the <code class="docutils literal"><span class="pre">textwidth</span></code> option:</p>
<div class="highlight-vim"><div class="highlight"><pre><span></span><span class="k">set</span> <span class="nb">textwidth</span><span class="p">=</span><span class="m">78</span>
</pre></div>
</div>
<p>If adhering to this limit makes the code less readable, you have one more
character to go on, which means 78 is a soft limit, and 79 is the hard
limit :)</p>
</li>
<li><p class="first">Import order</p>
<blockquote>
<div><ul class="simple">
<li>Python standard library (<cite>import xxx</cite>)</li>
<li>Python standard library (&#8216;from xxx import`)</li>
<li>Third-party packages.</li>
<li>Other modules from the current package.</li>
</ul>
<p>or in case of code using Django:</p>
<ul class="simple">
<li>Python standard library (<cite>import xxx</cite>)</li>
<li>Python standard library (&#8216;from xxx import`)</li>
<li>Third-party packages.</li>
<li>Django packages.</li>
<li>Other modules from the current package.</li>
</ul>
<p>Within these sections the imports should be sorted by module name.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
<span class="kn">from</span> <span class="nn">Queue</span> <span class="kn">import</span> <span class="n">Queue</span><span class="p">,</span> <span class="n">Empty</span>

<span class="kn">from</span> <span class="nn">.datastructures</span> <span class="kn">import</span> <span class="n">TokenBucket</span>
<span class="kn">from</span> <span class="nn">.five</span> <span class="kn">import</span> <span class="n">zip_longest</span><span class="p">,</span> <span class="n">items</span><span class="p">,</span> <span class="nb">range</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">timeutils</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Wild-card imports must not be used (<cite>from xxx import *</cite>).</p>
</li>
<li><p class="first">For distributions where Python 2.5 is the oldest support version
additional rules apply:</p>
<blockquote>
<div><ul>
<li><p class="first">Absolute imports must be enabled at the top of every module:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span>
</pre></div>
</div>
</li>
<li><p class="first">If the module uses the <a class="reference external" href="https://docs.python.org/dev/reference/compound_stmts.html#with" title="(in Python v3.6)"><code class="xref std std-keyword docutils literal"><span class="pre">with</span></code></a> statement and must be compatible
with Python 2.5 (thorn is not) then it must also enable that:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">with_statement</span>
</pre></div>
</div>
</li>
<li><p class="first">Every future import must be on its own line, as older Python 2.5
releases did not support importing multiple features on the
same future import line:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="c1"># Good</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">with_statement</span>

<span class="c1"># Bad</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">with_statement</span>
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><p>(Note that this rule does not apply if the package does not include
support for Python 2.5)</p>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first">Note that we use &#8220;new-style` relative imports when the distribution
does not support Python versions below 2.5</p>
<blockquote>
<div><p>This requires Python 2.5 or later:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">submodule</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="contributing-features-requiring-additional-libraries">
<span id="feature-with-extras"></span><h2><a class="toc-backref" href="#id39">Contributing features requiring additional libraries</a><a class="headerlink" href="#contributing-features-requiring-additional-libraries" title="Permalink to this headline">¶</a></h2>
<p>Some features like a new result backend may require additional libraries
that the user must install.</p>
<p>We use setuptools <cite>extra_requires</cite> for this, and all new optional features
that require third-party libraries must be added.</p>
<ol class="arabic">
<li><p class="first">Add a new requirements file in <cite>requirements/extras</cite></p>
<blockquote>
<div><p>E.g. for a Cassandra backend this would be
<code class="file docutils literal"><span class="pre">requirements/extras/cassandra.txt</span></code>, and the file looks like this:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>pycassa
</pre></div>
</div>
<p>These are pip requirement files so you can have version specifiers and
multiple packages are separated by newline.  A more complex example could
be:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span># pycassa 2.0 breaks Foo
pycassa&gt;=1.0,&lt;2.0
thrift
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Modify <code class="docutils literal"><span class="pre">setup.py</span></code></p>
<blockquote>
<div><p>After the requirements file is added you need to add it as an option
to <code class="file docutils literal"><span class="pre">setup.py</span></code> in the <code class="docutils literal"><span class="pre">extras_require</span></code> section:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">extra</span><span class="p">[</span><span class="s1">&#39;extras_require&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># ...</span>
    <span class="s1">&#39;cassandra&#39;</span><span class="p">:</span> <span class="n">extras</span><span class="p">(</span><span class="s1">&#39;cassandra.txt&#39;</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Document the new feature in <code class="file docutils literal"><span class="pre">docs/includes/installation.txt</span></code></p>
<blockquote>
<div><p>You must add your feature to the list in the Bundles section
of <code class="file docutils literal"><span class="pre">docs/includes/installation.txt</span></code>.</p>
<p>After you&#8217;ve made changes to this file you need to render
the distro <code class="file docutils literal"><span class="pre">README</span></code> file:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install -U requirements/pkgutils.txt
<span class="gp">$</span> make readme
</pre></div>
</div>
</div></blockquote>
</li>
</ol>
<p>That&#8217;s all that needs to be done, but remember that if your feature
adds additional configuration options then these needs to be documented
in <code class="file docutils literal"><span class="pre">docs/configuration.rst</span></code>.  Also all settings need to be added to the
<code class="file docutils literal"><span class="pre">thorn/conf.py</span></code> module.</p>
</div>
<div class="section" id="contacts">
<span id="contact-information"></span><h2><a class="toc-backref" href="#id40">Contacts</a><a class="headerlink" href="#contacts" title="Permalink to this headline">¶</a></h2>
<p>This is a list of people that can be contacted for questions
regarding the official git repositories, PyPI packages
Read the Docs pages.</p>
<p>If the issue is not an emergency then it is better
to <a class="reference internal" href="#reporting-bugs"><span class="std std-ref">report an issue</span></a>.</p>
<div class="section" id="committers">
<h3><a class="toc-backref" href="#id41">Committers</a><a class="headerlink" href="#committers" title="Permalink to this headline">¶</a></h3>
<div class="section" id="ask-solem">
<h4><a class="toc-backref" href="#id42">Ask Solem</a><a class="headerlink" href="#ask-solem" title="Permalink to this headline">¶</a></h4>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">github:</th><td class="field-body"><a class="reference external" href="https://github.com/ask">https://github.com/ask</a></td>
</tr>
<tr class="field-even field"><th class="field-name">twitter:</th><td class="field-body"><a class="reference external" href="http://twitter.com/#!/asksol">http://twitter.com/#!/asksol</a></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="packages">
<span id="id7"></span><h2><a class="toc-backref" href="#id43">Packages</a><a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h2>
<div class="section" id="thorn">
<h3><a class="toc-backref" href="#id44"><code class="docutils literal"><span class="pre">thorn</span></code></a><a class="headerlink" href="#thorn" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">git:</th><td class="field-body"><a class="reference external" href="https://github.com/robinhood/thorn">https://github.com/robinhood/thorn</a></td>
</tr>
<tr class="field-even field"><th class="field-name">CI:</th><td class="field-body"><a class="reference external" href="http://travis-ci.org/#!/robinhood/thorn">http://travis-ci.org/#!/robinhood/thorn</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Windows-CI:</th><td class="field-body"><a class="reference external" href="https://ci.appveyor.com/project/robinhood/thorn">https://ci.appveyor.com/project/robinhood/thorn</a></td>
</tr>
<tr class="field-even field"><th class="field-name">PyPI:</th><td class="field-body"><a class="reference external" href="http://pypi.python.org/pypi/thorn">http://pypi.python.org/pypi/thorn</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">docs:</th><td class="field-body"><a class="reference external" href="http://thorn.readthedocs.io">http://thorn.readthedocs.io</a></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="release-procedure">
<span id="id8"></span><h2><a class="toc-backref" href="#id45">Release Procedure</a><a class="headerlink" href="#release-procedure" title="Permalink to this headline">¶</a></h2>
<div class="section" id="updating-the-version-number">
<h3><a class="toc-backref" href="#id46">Updating the version number</a><a class="headerlink" href="#updating-the-version-number" title="Permalink to this headline">¶</a></h3>
<p>The version number must be updated two places:</p>
<blockquote>
<div><ul class="simple">
<li><code class="file docutils literal"><span class="pre">thorn/__init__.py</span></code></li>
<li><code class="file docutils literal"><span class="pre">docs/include/introduction.txt</span></code></li>
</ul>
</div></blockquote>
<p>After you have changed these files you must render
the <code class="file docutils literal"><span class="pre">README</span></code> files.  There is a script to convert sphinx syntax
to generic reStructured Text syntax, and the make target <cite>readme</cite>
does this for you:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> make readme
</pre></div>
</div>
<p>Now commit the changes:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> git commit -a -m <span class="s2">&quot;Bumps version to X.Y.Z&quot;</span>
</pre></div>
</div>
<p>and make a new version tag:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> git tag vX.Y.Z
<span class="gp">$</span> git push --tags
</pre></div>
</div>
</div>
<div class="section" id="releasing">
<h3><a class="toc-backref" href="#id47">Releasing</a><a class="headerlink" href="#releasing" title="Permalink to this headline">¶</a></h3>
<p>Commands to make a new public stable release:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> make distcheck  <span class="c1"># checks pep8, autodoc index, runs tests and more</span>
<span class="gp">$</span> make dist  <span class="c1"># NOTE: Runs git clean -xdf and removes files not in the repo.</span>
<span class="gp">$</span> python setup.py sdist upload --sign --identity<span class="o">=</span><span class="s1">&#39;Ask Solem&#39;</span>
<span class="gp">$</span> python setup.py bdist_wheel upload --sign --identity<span class="o">=</span><span class="s1">&#39;Ask Solem&#39;</span>
</pre></div>
</div>
<p>If this is a new release series then you also need to do the
following:</p>
<ul>
<li><dl class="first docutils">
<dt>Go to the Read The Docs management interface at:</dt>
<dd><p class="first last"><a class="reference external" href="http://readthedocs.org/projects/thorn?fromdocs=thorn">http://readthedocs.org/projects/thorn?fromdocs=thorn</a></p>
</dd>
</dl>
</li>
<li><p class="first">Enter &#8220;Edit project&#8221;</p>
<blockquote>
<div><p>Change default branch to the branch of this series, e.g. <code class="docutils literal"><span class="pre">2.4</span></code>
for series 2.4.</p>
</div></blockquote>
</li>
<li><p class="first">Also add the previous version under the &#8220;versions&#8221; tab.</p>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p><script async defer src="https://buttons.github.io/buttons.js"></script>
<a class="github-button" href="https://github.com/robinhood/thorn" data-icon="octicon-star" data-style="mega" data-count-href="/robinhood/thorn/stargazers" data-count-api="/repos/robinhood/thorn#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star Thorn on GitHub">Star</a>
<a class="github-button" href="https://github.com/robinhood/thorn/issues" data-icon="octicon-issue-opened" data-style="mega" data-count-api="/repos/robinhood/thorn#open_issues_count" data-count-aria-label="# issues on GitHub" aria-label="Issue robinhood/thorn on GitHub">Issue</a>
  <h4>Previous topic</h4>
  <p class="topless"><a href="changelog.html"
                        title="previous chapter">Changelog</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="glossary.html"
                        title="next chapter">Glossary</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/contributing.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="glossary.html" title="Glossary"
             >next</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Thorn 1.3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; <a href="copyright.html">Copyright</a> 2016, Robinhood Markets.
    </div>
  </body>
</html>